
<!doctype html>
<html lang="vi" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://lelongc.github.io/devops/k8s/01.core/04.etcd/">
      
      
        <link rel="prev" href="../02-03.docker-containerd/">
      
      
        <link rel="next" href="../05.kube-api-server/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>04.etcd - DraDoc</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-etcd-la-gi" class="md-skip">
          Bỏ qua
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Đầu trang">
    <a href="../../.." title="DraDoc" class="md-header__button md-logo" aria-label="DraDoc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.64 10.38c0 .25.02.45.07.62.05.12.12.28.21.46.04.04.05.1.05.15 0 .07-.04.13-.13.2l-.42.28c-.06.04-.12.06-.17.06-.07 0-.13-.04-.2-.1-.09-.1-.17-.2-.24-.31-.06-.11-.13-.24-.2-.39-.52.61-1.17.92-1.96.92-.56 0-1-.16-1.33-.48-.32-.32-.49-.75-.49-1.29 0-.55.2-1 .6-1.36.41-.34.95-.52 1.63-.52.23 0 .44.02.71.06.23.03.5.08.76.14v-.48c0-.51-.1-.84-.31-1.07-.22-.21-.57-.3-1.08-.3-.24 0-.48.03-.72.08-.25.06-.49.13-.72.23-.11.04-.2.07-.23.08-.05.02-.08.02-.11.02-.09 0-.14-.06-.14-.2v-.33c0-.1.01-.18.05-.23q.045-.075.18-.12c.24-.14.51-.24.84-.32a4 4 0 0 1 1.04-.13q1.185 0 1.74.54c.37.36.55.91.55 1.64v2.15zm-2.7 1.02c.22 0 .44-.04.68-.12s.45-.23.63-.43c.11-.13.19-.27.25-.43 0-.16.05-.35.05-.58v-.27c-.2-.07-.4-.07-.62-.12a7 7 0 0 0-.62-.04c-.45 0-.77.09-.99.27s-.32.43-.32.76c0 .32.07.56.24.71.16.17.39.25.7.25m5.34.71a.6.6 0 0 1-.28-.06c-.03-.05-.08-.14-.12-.26L8.32 6.65c-.04-.15-.06-.22-.06-.27 0-.11.05-.17.16-.17h.65c.13 0 .22.02.26.07.06.04.1.13.14.26l1.11 4.4 1.04-4.4c.03-.13.07-.22.13-.26.05-.04.14-.07.25-.07h.55c.12 0 .21.02.26.07.05.04.1.13.13.26L14 11l1.14-4.46c.04-.13.09-.22.13-.26.06-.04.14-.07.26-.07h.62c.11 0 .17.06.17.17 0 .03-.01.07-.02.12 0 0-.02.08-.04.15l-1.61 5.14c-.04.14-.08.21-.15.26-.04.04-.13.07-.24.07h-.57c-.13 0-.19-.02-.27-.07a.45.45 0 0 1-.12-.26L12.27 7.5l-1.03 4.28q-.045.195-.12.27a.5.5 0 0 1-.27.06zm8.55.18c-.33 0-.7-.04-1.03-.12s-.59-.17-.76-.26a.5.5 0 0 1-.21-.19.4.4 0 0 1-.04-.18v-.34c0-.14.05-.2.15-.2h.12c.04 0 .1.05.17.08.22.1.47.18.73.23.27.05.54.08.79.08.42 0 .75-.07.97-.22.23-.17.35-.36.35-.63 0-.19-.07-.34-.18-.47-.12-.12-.35-.24-.67-.34l-.97-.3c-.48-.16-.84-.38-1.06-.68a1.58 1.58 0 0 1-.33-.97c0-.28.06-.52.18-.73.12-.22.28-.4.46-.55.22-.15.44-.26.71-.34q.39-.12.84-.12.21 0 .45.03c.14.02.28.05.42.07.14.04.26.07.38.11s.2.08.28.12c.09.05.16.1.2.16s.06.13.06.22v.32q0 .21-.15.21c-.05 0-.14-.03-.26-.08-.37-.17-.8-.26-1.27-.26-.38 0-.66.06-.89.19-.2.12-.31.32-.31.59 0 .19.07.35.2.47.13.13.38.25.73.37l.95.3c.48.14.82.36 1.03.64q.3.405.3.93c0 .28-.06.54-.17.77-.12.22-.28.42-.5.58-.19.17-.44.29-.72.38s-.62.13-.95.13m1.25 3.24C17.89 17.14 14.71 18 12 18c-3.85 0-7.3-1.42-9.91-3.77-.21-.19-.02-.44.23-.29 2.82 1.63 6.29 2.62 9.89 2.62 2.43 0 5.1-.5 7.55-1.56.37-.15.68.26.32.53M21 14.5c-.29-.37-1.86-.18-2.57-.1-.21.03-.24-.16-.05-.3 1.25-.87 3.31-.6 3.54-.33.24.3-.06 2.36-1.23 3.34-.19.15-.36.07-.28-.11.27-.68.86-2.16.59-2.5"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DraDoc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              04.etcd
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Chuyển sang chế độ tối"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Chuyển sang chế độ tối" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Chuyển sang chế độ sáng"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Chuyển sang chế độ sáng" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Tìm kiếm" placeholder="Tìm kiếm" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Tìm kiếm">
        
        <button type="reset" class="md-search__icon md-icon" title="Xoá" aria-label="Xoá" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/lelongc/devops" title="Xem mã nguồn" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Welcome to DraDoc

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../cicd/roadmap/" class="md-tabs__link">
          
  
  
    
  
  Cicd

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../docker/" class="md-tabs__link">
          
  
  
    
  
  Docker

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../git/roadmap/" class="md-tabs__link">
          
  
  
    
  
  Git

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../iac/roadmap/" class="md-tabs__link">
          
  
  
    
  
  Iac

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  K8s

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../lab/" class="md-tabs__link">
          
  
  
    
  
  Lab

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../linux/" class="md-tabs__link">
          
  
  
    
  
  Linux

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../network/roadmap/" class="md-tabs__link">
          
  
  
    
  
  Network

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../network-comtia/roadmap/" class="md-tabs__link">
          
  
  
    
  
  Network comtia

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../observability/roadmap/" class="md-tabs__link">
          
  
  
    
  
  Observability

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../prog/python-automation/roadmap/" class="md-tabs__link">
          
  
  
    
  
  Prog

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../python/" class="md-tabs__link">
          
  
  
    
  
  Python

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../security/roadmap/" class="md-tabs__link">
          
  
  
    
  
  Security

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../system-design/" class="md-tabs__link">
          
  
  
    
  
  System design

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../testing/roadmap/" class="md-tabs__link">
          
  
  
    
  
  Testing

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Thanh điều hướng" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="DraDoc" class="md-nav__button md-logo" aria-label="DraDoc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.64 10.38c0 .25.02.45.07.62.05.12.12.28.21.46.04.04.05.1.05.15 0 .07-.04.13-.13.2l-.42.28c-.06.04-.12.06-.17.06-.07 0-.13-.04-.2-.1-.09-.1-.17-.2-.24-.31-.06-.11-.13-.24-.2-.39-.52.61-1.17.92-1.96.92-.56 0-1-.16-1.33-.48-.32-.32-.49-.75-.49-1.29 0-.55.2-1 .6-1.36.41-.34.95-.52 1.63-.52.23 0 .44.02.71.06.23.03.5.08.76.14v-.48c0-.51-.1-.84-.31-1.07-.22-.21-.57-.3-1.08-.3-.24 0-.48.03-.72.08-.25.06-.49.13-.72.23-.11.04-.2.07-.23.08-.05.02-.08.02-.11.02-.09 0-.14-.06-.14-.2v-.33c0-.1.01-.18.05-.23q.045-.075.18-.12c.24-.14.51-.24.84-.32a4 4 0 0 1 1.04-.13q1.185 0 1.74.54c.37.36.55.91.55 1.64v2.15zm-2.7 1.02c.22 0 .44-.04.68-.12s.45-.23.63-.43c.11-.13.19-.27.25-.43 0-.16.05-.35.05-.58v-.27c-.2-.07-.4-.07-.62-.12a7 7 0 0 0-.62-.04c-.45 0-.77.09-.99.27s-.32.43-.32.76c0 .32.07.56.24.71.16.17.39.25.7.25m5.34.71a.6.6 0 0 1-.28-.06c-.03-.05-.08-.14-.12-.26L8.32 6.65c-.04-.15-.06-.22-.06-.27 0-.11.05-.17.16-.17h.65c.13 0 .22.02.26.07.06.04.1.13.14.26l1.11 4.4 1.04-4.4c.03-.13.07-.22.13-.26.05-.04.14-.07.25-.07h.55c.12 0 .21.02.26.07.05.04.1.13.13.26L14 11l1.14-4.46c.04-.13.09-.22.13-.26.06-.04.14-.07.26-.07h.62c.11 0 .17.06.17.17 0 .03-.01.07-.02.12 0 0-.02.08-.04.15l-1.61 5.14c-.04.14-.08.21-.15.26-.04.04-.13.07-.24.07h-.57c-.13 0-.19-.02-.27-.07a.45.45 0 0 1-.12-.26L12.27 7.5l-1.03 4.28q-.045.195-.12.27a.5.5 0 0 1-.27.06zm8.55.18c-.33 0-.7-.04-1.03-.12s-.59-.17-.76-.26a.5.5 0 0 1-.21-.19.4.4 0 0 1-.04-.18v-.34c0-.14.05-.2.15-.2h.12c.04 0 .1.05.17.08.22.1.47.18.73.23.27.05.54.08.79.08.42 0 .75-.07.97-.22.23-.17.35-.36.35-.63 0-.19-.07-.34-.18-.47-.12-.12-.35-.24-.67-.34l-.97-.3c-.48-.16-.84-.38-1.06-.68a1.58 1.58 0 0 1-.33-.97c0-.28.06-.52.18-.73.12-.22.28-.4.46-.55.22-.15.44-.26.71-.34q.39-.12.84-.12.21 0 .45.03c.14.02.28.05.42.07.14.04.26.07.38.11s.2.08.28.12c.09.05.16.1.2.16s.06.13.06.22v.32q0 .21-.15.21c-.05 0-.14-.03-.26-.08-.37-.17-.8-.26-1.27-.26-.38 0-.66.06-.89.19-.2.12-.31.32-.31.59 0 .19.07.35.2.47.13.13.38.25.73.37l.95.3c.48.14.82.36 1.03.64q.3.405.3.93c0 .28-.06.54-.17.77-.12.22-.28.42-.5.58-.19.17-.44.29-.72.38s-.62.13-.95.13m1.25 3.24C17.89 17.14 14.71 18 12 18c-3.85 0-7.3-1.42-9.91-3.77-.21-.19-.02-.44.23-.29 2.82 1.63 6.29 2.62 9.89 2.62 2.43 0 5.1-.5 7.55-1.56.37-.15.68.26.32.53M21 14.5c-.29-.37-1.86-.18-2.57-.1-.21.03-.24-.16-.05-.3 1.25-.87 3.31-.6 3.54-.33.24.3-.06 2.36-1.23 3.34-.19.15-.36.07-.28-.11.27-.68.86-2.16.59-2.5"/></svg>

    </a>
    DraDoc
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lelongc/devops" title="Xem mã nguồn" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to DraDoc
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../cicd/roadmap/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Cicd
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../docker/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../git/roadmap/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Git
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../iac/roadmap/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Iac
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    K8s
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            K8s
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes Complete Knowledge Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roadmap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../00.k8s-manifests/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    00.k8s manifests
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            00.k8s manifests
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5" checked>
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    01.core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            01.core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    00
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01.cluster-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    01.cluster architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-03.docker-containerd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    02 03.docker containerd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    04.etcd
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    04.etcd
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Mục lục">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Mục lục
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-etcd-la-gi" class="md-nav__link">
    <span class="md-ellipsis">
      1. etcd là gì?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-key-value-store-khac-gi-co-so-du-lieu-truyen-thong-sql" class="md-nav__link">
    <span class="md-ellipsis">
      2. Key-Value Store khác gì Cơ sở dữ liệu truyền thống (SQL)? 🤔
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-bat-au-voi-etcd" class="md-nav__link">
    <span class="md-ellipsis">
      3. Bắt đầu với etcd
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-cu-lua-ve-phien-ban-etcdctl-v2-vs-v3" class="md-nav__link">
    <span class="md-ellipsis">
      4. "Cú lừa" về phiên bản: etcdctl v2 vs. v3 ⚠️
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-chot-ha-cho-nguoi-moi-bat-au" class="md-nav__link">
    <span class="md-ellipsis">
      5. "Chốt hạ" cho người mới bắt đầu 📝
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-vai-tro-cua-etcd-trong-kubernetes-bo-nao-cua-cum" class="md-nav__link">
    <span class="md-ellipsis">
      1. Vai trò của etcd trong Kubernetes - "Bộ não" của Cụm 🧠
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-cach-etcd-uoc-trien-khai-trong-kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      2. Cách etcd được triển khai trong Kubernetes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Cách etcd được triển khai trong Kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-trien-khai-thu-cong-from-scratch" class="md-nav__link">
    <span class="md-ellipsis">
      a. Triển khai "Thủ công" (From Scratch)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-trien-khai-bang-kubeadm-cach-de-hon" class="md-nav__link">
    <span class="md-ellipsis">
      b. Triển khai bằng kubeadm (Cách dễ hơn)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-du-lieu-uoc-luu-tru-nhu-the-nao" class="md-nav__link">
    <span class="md-ellipsis">
      3. Dữ liệu được lưu trữ như thế nào? 📂
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-etcd-trong-moi-truong-high-availability-ha" class="md-nav__link">
    <span class="md-ellipsis">
      4. etcd trong môi trường High Availability (HA) 🏰
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-chot-ha-cho-ky-thi" class="md-nav__link">
    <span class="md-ellipsis">
      5. "Chốt hạ" cho Kỳ thi 📝
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-etcdctl-vu-khi-tuong-tac-voi-etcd" class="md-nav__link">
    <span class="md-ellipsis">
      1. etcdctl - "Vũ khí" tương tác với etcd
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-hai-the-gioi-api-version-2-vs-version-3" class="md-nav__link">
    <span class="md-ellipsis">
      2. Hai "Thế giới" API: Version 2 vs. Version 3
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-giay-thong-hanh-xac-thuc-bang-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      3. "Giấy thông hành" - Xác thực bằng Certificate 🔑
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-cu-phap-full-option-lenh-etcdctl-hoan-chinh" class="md-nav__link">
    <span class="md-ellipsis">
      4. Cú pháp "Full Option" - Lệnh etcdctl hoàn chỉnh
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-chot-ha-cho-ky-thi-cka" class="md-nav__link">
    <span class="md-ellipsis">
      5. "Chốt hạ" cho Kỳ thi CKA 📝
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05.kube-api-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    05.kube api server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06.kube-controller-manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    06.kube controller manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07.KubeScheduler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    07.KubeScheduler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08.kubelet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    08.kubelet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09.kube-proxy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    09.kube proxy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10.pods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10.pods
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-12.pods-yml-demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11 12.pods yml demo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13.replicaset-demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13.replicaset demo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14.deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    14.deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../15.services-nodeport/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15.services nodeport
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../16.services-clusterIP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    16.services clusterIP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../17.services-loadbalancer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    17.services loadbalancer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../18.service-engpoint/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    18.service engpoint
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../19.namespace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    19.namespace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../20.ImperativeDeclarative/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    20.ImperativeDeclarative
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../21.kubectlAppy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    21.kubectlAppy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    02.Scheduling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            02.Scheduling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02.Scheduling/01.manualScheduling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hướng Dẫn Chi Tiết: Cách Tự Động Lập Lịch Pod Trong Kubernetes Khi Không Có Scheduler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02.Scheduling/02.LabelsAndSelectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Labels và Selectors trong Kubernetes: Cách Phân Loại và Quản Lý Đối Tượng Hiệu Quả
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../lab/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Lab
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../linux/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../network/roadmap/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../network-comtia/roadmap/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Network comtia
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../observability/roadmap/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Observability
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../prog/python-automation/roadmap/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Prog
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../python/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../security/roadmap/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../system-design/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    System design
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../testing/roadmap/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Mục lục">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Mục lục
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-etcd-la-gi" class="md-nav__link">
    <span class="md-ellipsis">
      1. etcd là gì?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-key-value-store-khac-gi-co-so-du-lieu-truyen-thong-sql" class="md-nav__link">
    <span class="md-ellipsis">
      2. Key-Value Store khác gì Cơ sở dữ liệu truyền thống (SQL)? 🤔
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-bat-au-voi-etcd" class="md-nav__link">
    <span class="md-ellipsis">
      3. Bắt đầu với etcd
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-cu-lua-ve-phien-ban-etcdctl-v2-vs-v3" class="md-nav__link">
    <span class="md-ellipsis">
      4. "Cú lừa" về phiên bản: etcdctl v2 vs. v3 ⚠️
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-chot-ha-cho-nguoi-moi-bat-au" class="md-nav__link">
    <span class="md-ellipsis">
      5. "Chốt hạ" cho người mới bắt đầu 📝
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-vai-tro-cua-etcd-trong-kubernetes-bo-nao-cua-cum" class="md-nav__link">
    <span class="md-ellipsis">
      1. Vai trò của etcd trong Kubernetes - "Bộ não" của Cụm 🧠
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-cach-etcd-uoc-trien-khai-trong-kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      2. Cách etcd được triển khai trong Kubernetes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Cách etcd được triển khai trong Kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-trien-khai-thu-cong-from-scratch" class="md-nav__link">
    <span class="md-ellipsis">
      a. Triển khai "Thủ công" (From Scratch)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-trien-khai-bang-kubeadm-cach-de-hon" class="md-nav__link">
    <span class="md-ellipsis">
      b. Triển khai bằng kubeadm (Cách dễ hơn)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-du-lieu-uoc-luu-tru-nhu-the-nao" class="md-nav__link">
    <span class="md-ellipsis">
      3. Dữ liệu được lưu trữ như thế nào? 📂
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-etcd-trong-moi-truong-high-availability-ha" class="md-nav__link">
    <span class="md-ellipsis">
      4. etcd trong môi trường High Availability (HA) 🏰
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-chot-ha-cho-ky-thi" class="md-nav__link">
    <span class="md-ellipsis">
      5. "Chốt hạ" cho Kỳ thi 📝
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-etcdctl-vu-khi-tuong-tac-voi-etcd" class="md-nav__link">
    <span class="md-ellipsis">
      1. etcdctl - "Vũ khí" tương tác với etcd
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-hai-the-gioi-api-version-2-vs-version-3" class="md-nav__link">
    <span class="md-ellipsis">
      2. Hai "Thế giới" API: Version 2 vs. Version 3
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-giay-thong-hanh-xac-thuc-bang-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      3. "Giấy thông hành" - Xác thực bằng Certificate 🔑
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-cu-phap-full-option-lenh-etcdctl-hoan-chinh" class="md-nav__link">
    <span class="md-ellipsis">
      4. Cú pháp "Full Option" - Lệnh etcdctl hoàn chỉnh
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-chot-ha-cho-ky-thi-cka" class="md-nav__link">
    <span class="md-ellipsis">
      5. "Chốt hạ" cho Kỳ thi CKA 📝
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/lelongc/devops/edit/main/my-website/docs/k8s/01.core/04.etcd.md" title="Chỉnh sửa" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


  <h1>04.etcd</h1>

<h2 id="1-etcd-la-gi">1. <code>etcd</code> là gì?<a class="headerlink" href="#1-etcd-la-gi" title="Permanent link">&para;</a></h2>
<p>Bạn có thể nghĩ về <strong><code>etcd</code></strong> như một cơ sở dữ liệu đặc biệt. Theo định nghĩa, nó là một <strong>kho lưu trữ khóa-giá trị (key-value store)</strong> có các đặc tính sau:</p>
<ul>
<li><strong>Phân tán (Distributed):</strong> Dữ liệu được trải rộng trên nhiều máy chủ.</li>
<li><strong>Đáng tin cậy (Reliable):</strong> Đảm bảo dữ liệu không bị mất mát.</li>
<li><strong>Đơn giản, an toàn và nhanh chóng.</strong></li>
</ul>
<p>Trong Kubernetes, <code>etcd</code> chính là "bộ não" lưu trữ toàn bộ trạng thái và cấu hình của cả cụm.</p>
<hr />
<h2 id="2-key-value-store-khac-gi-co-so-du-lieu-truyen-thong-sql">2. Key-Value Store khác gì Cơ sở dữ liệu truyền thống (SQL)? 🤔<a class="headerlink" href="#2-key-value-store-khac-gi-co-so-du-lieu-truyen-thong-sql" title="Permanent link">&para;</a></h2>
<p>Đây là điểm khác biệt cốt lõi bạn cần nắm:</p>
<ul>
<li>
<p><strong>Cơ sở dữ liệu truyền thống (SQL):</strong></p>
</li>
<li>
<p>Lưu dữ liệu dưới dạng <strong>bảng (table)</strong> với các <strong>hàng (row)</strong> và <strong>cột (column)</strong> được định nghĩa nghiêm ngặt.</p>
</li>
<li>
<p><em>Ví dụ:</em> Một bảng thông tin nhân viên. Nếu bạn muốn thêm một loại thông tin mới (ví dụ: <code>lương</code>), bạn phải thêm một cột mới cho <strong>toàn bộ bảng</strong>, ảnh hưởng đến tất cả các hàng, kể cả những người không có thông tin lương (dẫn đến nhiều ô trống).</p>
</li>
<li>
<p><strong>Kho lưu trữ Key-Value (như <code>etcd</code>):</strong></p>
</li>
<li>
<p>Lưu thông tin dưới dạng các cặp <strong>Khóa (Key) = Giá trị (Value)</strong>, giống như các <strong>tài liệu (document)</strong> riêng lẻ.</p>
</li>
<li><em>Ví dụ:</em> Mỗi người có một "tài liệu" riêng. Người đi làm thì có trường <code>lương</code> trong tài liệu của họ. Học sinh thì có trường <code>điểm</code> trong tài liệu của họ.</li>
<li><strong>Lợi ích:</strong> Cấu trúc rất <strong>linh hoạt</strong>. Bạn có thể thêm một trường mới vào một tài liệu mà không ảnh hưởng gì đến các tài liệu khác. Dữ liệu phức tạp thường được lưu dưới dạng JSON hoặc YAML.</li>
</ul>
<hr />
<h2 id="3-bat-au-voi-etcd">3. Bắt đầu với <code>etcd</code><a class="headerlink" href="#3-bat-au-voi-etcd" title="Permanent link">&para;</a></h2>
<p>Việc cài đặt và chạy <code>etcd</code> rất đơn giản:</p>
<ol>
<li><strong>Tải về (Download):</strong> Lấy file nhị phân (binary) phù hợp với hệ điều hành của bạn từ trang GitHub của <code>etcd</code>.</li>
<li><strong>Giải nén (Unzip):</strong> Giải nén file vừa tải.</li>
<li><strong>Chạy (Run):</strong> Chạy file thực thi <code>etcd</code>.</li>
<li>Mặc định, <code>etcd</code> sẽ khởi động một dịch vụ và lắng nghe trên cổng <strong><code>2379</code></strong>.</li>
</ol>
<p>Sau khi chạy, bạn có thể dùng một "client" để giao tiếp với nó. Client mặc định đi kèm là <strong><code>etcdctl</code></strong>.</p>
<hr />
<h2 id="4-cu-lua-ve-phien-ban-etcdctl-v2-vs-v3">4. "Cú lừa" về phiên bản: <code>etcdctl</code> v2 vs. v3 ⚠️<a class="headerlink" href="#4-cu-lua-ve-phien-ban-etcdctl-v2-vs-v3" title="Permanent link">&para;</a></h2>
<p>Đây là phần <strong>quan trọng nhất và dễ gây nhầm lẫn nhất</strong> cho người mới bắt đầu!</p>
<p>Giữa phiên bản <code>etcd</code> v2 và v3 có sự thay đổi lớn về API, dẫn đến các lệnh <code>etcdctl</code> cũng thay đổi theo.</p>
<ul>
<li>
<p><strong>Làm sao để biết <code>etcdctl</code> đang dùng API phiên bản nào?</strong></p>
</li>
<li>
<p>Chạy lệnh: <code>etcdctl version</code></p>
</li>
<li>
<p>Lệnh này sẽ hiển thị phiên bản của công cụ <code>etcdctl</code> và quan trọng hơn là <strong>phiên bản API</strong> mà nó đang được cấu hình để sử dụng (là <code>2</code> hoặc <code>3</code>).</p>
</li>
<li>
<p><strong>Làm sao để chuyển sang dùng API v3?</strong></p>
</li>
<li>
<p>Các phiên bản <code>etcdctl</code> mới hơn thường mặc định dùng API v3. Nhưng nếu bạn gặp phiên bản cũ hơn, bạn cần ra lệnh cho nó dùng API v3.</p>
</li>
<li>
<p>Cách tốt nhất là đặt biến môi trường cho toàn bộ phiên làm việc của bạn bằng lệnh:
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">ETCDCTL_API</span><span class="o">=</span><span class="m">3</span>
</code></pre></div></p>
</li>
<li>
<p><strong>So sánh lệnh giữa v2 và v3:</strong></p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: left;">Tác vụ</th>
<th style="text-align: left;">Lệnh API v2</th>
<th style="text-align: left;">Lệnh API v3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Lưu giá trị</strong></td>
<td style="text-align: left;"><code>etcdctl set key1 value1</code></td>
<td style="text-align: left;"><code>etcdctl put key1 value1</code></td>
</tr>
<tr>
<td style="text-align: left;"><strong>Lấy giá trị</strong></td>
<td style="text-align: left;"><code>etcdctl get key1</code></td>
<td style="text-align: left;"><code>etcdctl get key1</code></td>
</tr>
<tr>
<td style="text-align: left;"><strong>Xem phiên bản</strong></td>
<td style="text-align: left;"><code>etcdctl --version</code> (là một tùy chọn)</td>
<td style="text-align: left;"><code>etcdctl version</code> (là một lệnh)</td>
</tr>
</tbody>
</table>
<p>Việc <code>set</code> đổi thành <code>put</code> là thay đổi dễ nhận thấy nhất.</p>
<hr />
<h2 id="5-chot-ha-cho-nguoi-moi-bat-au">5. "Chốt hạ" cho người mới bắt đầu 📝<a class="headerlink" href="#5-chot-ha-cho-nguoi-moi-bat-au" title="Permanent link">&para;</a></h2>
<ul>
<li><strong><code>etcd</code></strong> là một kho lưu trữ <strong>key-value</strong> linh hoạt, là "bộ não" của Kubernetes.</li>
<li>Việc cài đặt và chạy nó khá đơn giản, mặc định ở cổng <strong>2379</strong>.</li>
<li>Khi sử dụng <code>etcdctl</code>, hãy luôn chắc chắn rằng bạn đang làm việc với <strong>API v3</strong> bằng cách kiểm tra (<code>etcdctl version</code>) và thiết lập biến môi trường (<code>export ETCDCTL_API=3</code>). Đây là mẹo thực tế quan trọng nhất để tránh lỗi không đáng có.</li>
</ul>
<h2 id="1-vai-tro-cua-etcd-trong-kubernetes-bo-nao-cua-cum">1. Vai trò của <code>etcd</code> trong Kubernetes - "Bộ não" của Cụm 🧠<a class="headerlink" href="#1-vai-tro-cua-etcd-trong-kubernetes-bo-nao-cua-cum" title="Permanent link">&para;</a></h2>
<p>Trong một cụm Kubernetes, <strong><code>etcd</code> chính là nguồn chân lý duy nhất (single source of truth)</strong> .</p>
<ul>
<li>Nó lưu trữ <strong>TOÀN BỘ thông tin</strong> về cụm, bao gồm:</li>
<li>Nodes, Pods, Configs, Secrets, Accounts, Roles, Role Bindings, và nhiều thứ khác.</li>
<li>Mọi thông tin bạn thấy khi chạy lệnh <code>kubectl get ...</code> đều được lấy từ <code>etcd</code>.</li>
<li>Mọi thay đổi bạn thực hiện với cụm (thêm node, triển khai pod,...) chỉ được coi là <strong>hoàn tất</strong> khi nó đã được cập nhật thành công vào <code>etcd</code>.</li>
</ul>
<hr />
<h2 id="2-cach-etcd-uoc-trien-khai-trong-kubernetes">2. Cách <code>etcd</code> được triển khai trong Kubernetes<a class="headerlink" href="#2-cach-etcd-uoc-trien-khai-trong-kubernetes" title="Permanent link">&para;</a></h2>
<p><code>etcd</code> được cài đặt như thế nào còn phụ thuộc vào cách bạn dựng cụm Kubernetes của mình. Có hai cách chính:</p>
<h3 id="a-trien-khai-thu-cong-from-scratch">a. Triển khai "Thủ công" (From Scratch)<a class="headerlink" href="#a-trien-khai-thu-cong-from-scratch" title="Permanent link">&para;</a></h3>
<p>Đây là cách bạn tự tay làm mọi thứ.</p>
<ul>
<li>Bạn sẽ phải tự tải file nhị phân (binary) của <code>etcd</code> về.</li>
<li>Tự cài đặt và cấu hình <code>etcd</code> như một service chạy trên Master Node.</li>
<li>Khi cấu hình, có một tham số rất quan trọng cần lưu ý:</li>
<li><strong><code>--advertise-client-urls</code></strong> : Đây là địa chỉ mà <code>etcd</code> sẽ lắng nghe các kết nối từ client (ví dụ: <code>https://&lt;IP-của-master-node&gt;:2379</code>).</li>
<li><code>kube-api-server</code> (thành phần trung tâm của Kubernetes) phải được cấu hình để trỏ đến đúng URL này thì mới có thể nói chuyện được với <code>etcd</code>.</li>
</ul>
<h3 id="b-trien-khai-bang-kubeadm-cach-de-hon">b. Triển khai bằng <code>kubeadm</code> (Cách dễ hơn)<a class="headerlink" href="#b-trien-khai-bang-kubeadm-cach-de-hon" title="Permanent link">&para;</a></h3>
<p><code>kubeadm</code> là một công cụ giúp tự động hóa việc cài đặt cụm Kubernetes.</p>
<ul>
<li>Khi bạn dùng <code>kubeadm</code>, nó sẽ <strong>tự động triển khai <code>etcd</code> cho bạn</strong> .</li>
<li>Điều đặc biệt là <code>etcd</code> sẽ được triển khai dưới dạng một <strong>Pod</strong> chạy trong namespace <strong><code>kube-system</code></strong> .</li>
<li>Nếu muốn tương tác với <code>etcd</code> bằng <code>etcdctl</code>, bạn sẽ cần phải thực hiện lệnh <em>bên trong</em> Pod <code>etcd</code> đó.</li>
</ul>
<hr />
<h2 id="3-du-lieu-uoc-luu-tru-nhu-the-nao">3. Dữ liệu được lưu trữ như thế nào? 📂<a class="headerlink" href="#3-du-lieu-uoc-luu-tru-nhu-the-nao" title="Permanent link">&para;</a></h2>
<p>Kubernetes không lưu dữ liệu một cách lộn xộn trong <code>etcd</code>. Nó tổ chức theo một cấu trúc thư mục cụ thể:</p>
<ul>
<li>Thư mục gốc là <code>/registry</code>.</li>
<li>Bên dưới là các thư mục con cho từng loại tài nguyên, ví dụ:</li>
<li><code>/registry/nodes</code></li>
<li><code>/registry/pods</code></li>
<li><code>/registry/deployments</code></li>
<li>...</li>
</ul>
<hr />
<h2 id="4-etcd-trong-moi-truong-high-availability-ha">4. <code>etcd</code> trong môi trường High Availability (HA) 🏰<a class="headerlink" href="#4-etcd-trong-moi-truong-high-availability-ha" title="Permanent link">&para;</a></h2>
<ul>
<li>Trong một môi trường HA, bạn sẽ có nhiều Master Node để dự phòng cho nhau.</li>
<li>Tương ứng, bạn cũng sẽ có nhiều instance <code>etcd</code> chạy trên các Master Node này, tạo thành một cụm <code>etcd</code> (etcd cluster).</li>
<li>Để các instance <code>etcd</code> này biết về nhau và hoạt động như một cụm, bạn cần cấu hình tham số <strong><code>--initial-cluster</code></strong> . Tham số này sẽ liệt kê địa chỉ của tất cả các thành viên trong cụm <code>etcd</code>.</li>
</ul>
<hr />
<h2 id="5-chot-ha-cho-ky-thi">5. "Chốt hạ" cho Kỳ thi 📝<a class="headerlink" href="#5-chot-ha-cho-ky-thi" title="Permanent link">&para;</a></h2>
<ul>
<li><strong><code>etcd</code> là cơ sở dữ liệu, là trái tim, là bộ não của Kubernetes</strong> , lưu trữ mọi trạng thái của cụm.</li>
<li>Hiểu rõ hai phương pháp triển khai chính:</li>
<li><strong>Thủ công (From Scratch):</strong> Bạn tự cài, nhớ tham số <code>--advertise-client-urls</code>.</li>
<li><strong>Dùng <code>kubeadm</code>:</strong> <code>etcd</code> được triển khai như một <strong>Pod</strong> trong namespace <code>kube-system</code>.</li>
<li>Trong môi trường HA, <code>etcd</code> chạy dưới dạng một cụm (cluster) và được cấu hình qua tham số <code>--initial-cluster</code>.</li>
</ul>
<hr />
<h2 id="1-etcdctl-vu-khi-tuong-tac-voi-etcd">1. <code>etcdctl</code> - "Vũ khí" tương tác với <code>etcd</code><a class="headerlink" href="#1-etcdctl-vu-khi-tuong-tac-voi-etcd" title="Permanent link">&para;</a></h2>
<p>Như chúng ta đã biết, <strong><code>etcdctl</code></strong> là công cụ dòng lệnh (CLI) để "nói chuyện" với cơ sở dữ liệu <code>etcd</code>. Tuy nhiên, để "nói chuyện" thành công, bạn cần biết hai điều quan trọng: "ngôn ngữ" và "giấy thông hành".</p>
<hr />
<h2 id="2-hai-the-gioi-api-version-2-vs-version-3">2. Hai "Thế giới" API: Version 2 vs. Version 3<a class="headerlink" href="#2-hai-the-gioi-api-version-2-vs-version-3" title="Permanent link">&para;</a></h2>
<p><code>etcdctl</code> có thể giao tiếp với <code>etcd</code> server bằng 2 phiên bản API: v2 và v3. Điều quan trọng là <strong>bộ lệnh của hai phiên bản này khác nhau</strong> .</p>
<table>
<thead>
<tr>
<th><strong>Tác vụ</strong></th>
<th><strong>Lệnh API v2</strong></th>
<th><strong>Lệnh API v3</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Lưu giá trị</strong></td>
<td><code>etcdctl set</code></td>
<td><code>etcdctl put</code></td>
</tr>
<tr>
<td><strong>Backup</strong></td>
<td><code>etcdctl backup</code></td>
<td><code>etcdctl snapshot save</code></td>
</tr>
<tr>
<td><strong>Kiểm tra "sức khỏe"</strong></td>
<td><code>etcdctl cluster-health</code></td>
<td><code>etcdctl endpoint health</code></td>
</tr>
</tbody>
</table>
<p>Mặc định, <code>etcdctl</code> có thể được cấu hình để dùng API v2. Khi đó, nếu bạn gõ lệnh của v3 (ví dụ: <code>put</code>), nó sẽ báo lỗi và ngược lại.</p>
<p>👉 Làm thế nào để chắc chắn dùng API v3?</p>
<p>Cách tốt nhất là đặt biến môi trường sau cho phiên làm việc của bạn:</p>
<p><strong>Bash</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>export ETCDCTL_API=3
</code></pre></div>
<hr />
<h2 id="3-giay-thong-hanh-xac-thuc-bang-certificate">3. "Giấy thông hành" - Xác thực bằng Certificate 🔑<a class="headerlink" href="#3-giay-thong-hanh-xac-thuc-bang-certificate" title="Permanent link">&para;</a></h2>
<p>Trong một cụm Kubernetes được cài đặt đúng cách, <code>etcd</code> server sẽ yêu cầu xác thực an toàn. Bạn không thể "tay không" vào nói chuyện được mà cần có "giấy thông hành" là các file certificate.</p>
<p><code>etcdctl</code> cần bạn chỉ định đường dẫn đến 3 file certificate quan trọng:</p>
<ul>
<li><code>--cacert</code>: Đường dẫn đến file CA certificate của <code>etcd</code> (ví dụ: <code>/etc/kubernetes/pki/etcd/ca.crt</code>). Dùng để xác thực <code>etcd</code> server.</li>
<li><code>--cert</code>: Đường dẫn đến file certificate của client (ví dụ: <code>/etc/kubernetes/pki/etcd/server.crt</code>). Dùng để <code>etcd</code> server xác thực bạn.</li>
<li><code>--key</code>: Đường dẫn đến file key riêng của client (ví dụ: <code>/etc/kubernetes/pki/etcd/server.key</code>).</li>
</ul>
<p><em>Lưu ý: Trong một cụm <code>kubeadm</code>, các file này thường nằm ở đường dẫn <code>/etc/kubernetes/pki/etcd/</code> trên master node.</em></p>
<hr />
<h2 id="4-cu-phap-full-option-lenh-etcdctl-hoan-chinh">4. Cú pháp "Full Option" - Lệnh <code>etcdctl</code> hoàn chỉnh<a class="headerlink" href="#4-cu-phap-full-option-lenh-etcdctl-hoan-chinh" title="Permanent link">&para;</a></h2>
<p>Kết hợp tất cả những điều trên, một lệnh <code>etcdctl</code> hoàn chỉnh để tương tác với <code>etcd</code> (đang chạy dưới dạng Pod trong một cụm <code>kubeadm</code>) sẽ trông như thế này:</p>
<p><strong>Bash</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>kubectl exec etcd-master -n kube-system -- sh -c &quot;ETCDCTL_API=3 etcdctl get / --prefix --keys-only --limit=10 --cacert /etc/kubernetes/pki/etcd/ca.crt --cert /etc/kubernetes/pki/etcd/server.crt --key /etc/kubernetes/pki/etcd/server.key&quot;
</code></pre></div>
<p>Hãy "mổ xẻ" nó:</p>
<ul>
<li><code>kubectl exec etcd-master -n kube-system --</code>: Chạy một lệnh bên trong Pod tên là <code>etcd-master</code> thuộc namespace <code>kube-system</code>.</li>
<li><code>sh -c "..."</code>: Thực thi chuỗi lệnh bên trong dấu ngoặc kép.</li>
<li><code>ETCDCTL_API=3</code>: Đảm bảo chúng ta đang dùng API v3.</li>
<li><code>etcdctl get / --prefix --keys-only --limit=10</code>: Lệnh <code>etcdctl</code> thực tế để lấy 10 key đầu tiên từ thư mục gốc.</li>
<li><code>--cacert ... --cert ... --key ...</code>: Cung cấp 3 "giấy thông hành" cần thiết để xác thực.</li>
</ul>
<hr />
<h2 id="5-chot-ha-cho-ky-thi-cka">5. "Chốt hạ" cho Kỳ thi CKA 📝<a class="headerlink" href="#5-chot-ha-cho-ky-thi-cka" title="Permanent link">&para;</a></h2>
<p>Khi làm bài thi CKA, nếu bạn cần tương tác trực tiếp với <code>etcd</code> bằng <code>etcdctl</code>, hãy luôn nhớ "thần chú" 3 điều sau:</p>
<ol>
<li><strong>Phiên bản API:</strong> Luôn đặt <code>ETCDCTL_API=3</code>.</li>
<li><strong>Certificate:</strong> Luôn cung cấp đủ 3 tham số <code>--cacert</code>, <code>--cert</code>, và <code>--key</code> với đường dẫn chính xác.</li>
<li><strong>Thực thi trong Pod:</strong> Nếu <code>etcd</code> chạy như một Pod, bạn phải dùng <code>kubectl exec</code> để vào trong Pod đó và thực thi lệnh.</li>
</ol>
<p>Quên một trong những điều này gần như chắc chắn sẽ khiến lệnh của bạn thất bại. Hy vọng phần giải thích chi tiết này sẽ giúp bạn tự tin hơn khi làm việc với <code>etcd</code>! Chúc bạn buổi chiều học tập hiệu quả!</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Cập nhật lần cuối">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="12 tháng 8, 2025 04:18:24 UTC">12 tháng 8, 2025</span>
  </span>

    
    
    
    
  </aside>





<h2 id="__comments">Bình luận</h2>
<!-- Insert generated snippet here -->
<script src="https://giscus.app/client.js"
        data-repo="lelongc/devops"
        data-repo-id="R_kgDOOg304w"
        data-category="Q&A"
        data-category-id="DIC_kwDOOg30484Cpie6"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="dark"
        data-lang="vi"
        crossorigin="anonymous"
        async>
</script>
<!-- Synchronize Giscus theme with palette -->
<script>
  var giscus = document.querySelector("script[src*=giscus]");

  // Set palette on initial load
  var palette = __md_get("__palette");
  if (palette && typeof palette.color === "object") {
    var theme = palette.color.scheme === "slate" ? "transparent_dark" : "light";

    // Instruct Giscus to set theme
    giscus.setAttribute("data-theme", theme);
  }

  // Register event handlers after documented loaded
  document.addEventListener("DOMContentLoaded", function () {
    var ref = document.querySelector("[data-md-component=palette]");
    ref.addEventListener("change", function () {
      var palette = __md_get("__palette");
      if (palette && typeof palette.color === "object") {
        var theme =
          palette.color.scheme === "slate" ? "transparent_dark" : "light";

        // Instruct Giscus to change theme
        var frame = document.querySelector(".giscus-frame");
        frame.contentWindow.postMessage(
          { giscus: { setConfig: { theme } } },
          "https://giscus.app"
        );
      }
    });
  });
</script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Trở lại mục lục
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Chân trang" >
        
          
          <a href="../02-03.docker-containerd/" class="md-footer__link md-footer__link--prev" aria-label="Trước: 02 03.docker containerd">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Trước
              </span>
              <div class="md-ellipsis">
                02 03.docker containerd
              </div>
            </div>
          </a>
        
        
          
          <a href="../05.kube-api-server/" class="md-footer__link md-footer__link--next" aria-label="Sau: 05.kube api server">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Sau
              </span>
              <div class="md-ellipsis">
                05.kube api server
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Lê Long C. 2025
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/lelongc" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/long-lê-190l/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.top", "navigation.sections", "navigation.search", "navigation.tabs", "navigation.tabs.sticky", "navigation.footer", "navigation.paths", "navigation.indexes", "navigation.indexes.sticky", "navigation.prune", "content.code.copy", "content.action.edit", "content.images.lazy", "toc.follow", "toc.expand"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u0110\u00e3 sao ch\u00e9p", "clipboard.copy": "Sao ch\u00e9p v\u00e0o b\u1ed9 nh\u1edb t\u1ea1m", "search.result.more.one": "1 t\u1eeb kh\u00e1c trong trang", "search.result.more.other": "# t\u1eeb kh\u00e1c trong trang", "search.result.none": "Kh\u00f4ng t\u00ecm th\u1ea5y t\u00e0i li\u1ec7u li\u00ean quan", "search.result.one": "1 t\u00e0i li\u1ec7u li\u00ean quan", "search.result.other": "# t\u00e0i li\u1ec7u li\u00ean quan", "search.result.placeholder": "Nh\u1eadp \u0111\u1ec3 b\u1eaft \u0111\u1ea7u t\u00ecm ki\u1ebfm", "search.result.term.missing": "Kh\u00f4ng", "select.version": "Ch\u1ecdn phi\u00ean b\u1ea3n"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>