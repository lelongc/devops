1.  **Mở rộng Phân vùng (Partition):** Bảo cho hệ điều hành biết rằng phân vùng gốc (ví dụ `/dev/xvda1`) giờ đây có thể sử dụng toàn bộ 30GB của ổ đĩa.
2.  **Mở rộng Hệ thống File (File System):** Bảo cho hệ thống file (ví dụ: `ext4` hoặc `xfs`) đang nằm trên phân vùng đó hãy "giãn ra" để lấp đầy không gian mới.

---

### **Hướng dẫn Chi tiết Từng bước**

Hãy thực hiện các lệnh sau trong terminal sau khi đã SSH vào máy chủ EC2 của bạn.

#### **Bước 1: Kiểm tra Tình trạng Hiện tại (Rất quan trọng)**

Trước tiên, chúng ta cần xác định tên ổ đĩa, phân vùng và loại hệ thống file.

1.  **Xem các ổ đĩa và phân vùng:**

    ```bash
    lsblk
    ```

    - **Kết quả có thể là:**
      ```
      NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
      xvda    202:0    0  30G  0 disk
      └─xvda1 202:1    0   8G  0 part /
      ```
    - **Phân tích:** Lệnh này cho thấy ổ đĩa chính tên là `xvda` đã có dung lượng **30G**. Tuy nhiên, phân vùng gốc (`/`) là `xvda1` vẫn chỉ đang sử dụng **8G**. Tên ổ đĩa của bạn cũng có thể là `nvme0n1` và phân vùng là `nvme0n1p1`.

2.  **Xem dung lượng và loại hệ thống file:**

    ```bash
    df -hT
    ```

    - **Kết quả có thể là:**
      ```
      Filesystem     Type      Size  Used Avail Use% Mounted on
      /dev/xvda1     ext4      7.8G  2.5G  5.3G  32% /
      ```
    - **Phân tích:** Lệnh này xác nhận lại dung lượng của phân vùng `/` đang là `7.8G` (khoảng 8G) và quan trọng nhất, **`Type`** (loại) của nó là **`ext4`**. Hãy ghi nhớ loại này. Hệ thống của bạn cũng có thể là **`xfs`**.

#### **Bước 2: Mở rộng Phân vùng**

Sử dụng công cụ `growpart`, thường được cài sẵn trên các máy ảo của AWS.

- Lệnh có dạng: `sudo growpart /dev/device_name partition_number`
- Dựa vào ví dụ ở Bước 1, ổ đĩa là `xvda` và số của phân vùng là `1`. Lệnh sẽ là:
  ```bash
  sudo growpart /dev/xvda 1
  ```
- Nếu tên ổ đĩa của bạn là `nvme0n1`, lệnh sẽ là: `sudo growpart /dev/nvme0n1 1`

Sau khi chạy, hệ điều hành sẽ biết rằng phân vùng `xvda1` giờ đây đã được phép chiếm toàn bộ 30GB.

#### **Bước 3: Mở rộng Hệ thống File**

Đây là bước cuối cùng. Lệnh bạn dùng sẽ phụ thuộc vào loại hệ thống file đã xác định ở Bước 1.

- **Trường hợp 1: Nếu loại là `ext4` (phổ biến trên Ubuntu/Debian):**

  - Sử dụng lệnh `resize2fs`. Thay `xvda1` bằng tên phân vùng của bạn.
    ```bash
    sudo resize2fs /dev/xvda1
    ```

- **Trường hợp 2: Nếu loại là `xfs` (phổ biến trên Amazon Linux/RHEL/CentOS):**

  - Sử dụng lệnh `xfs_growfs`.
    ```bash
    sudo xfs_growfs -d /
    ```
  - _(Tham số `-d` và chỉ định mount point `/` là cách làm chuẩn cho phân vùng gốc)._

#### **Bước 4: Xác nhận Lại Kết quả**

Chạy lại lệnh `df -hT` để xem thành quả:

```bash
df -hT
```

Bây giờ, bạn sẽ thấy dung lượng (`Size`) của phân vùng `/` đã được nâng lên gần 30GB.

---

### **Tóm tắt Lệnh**

1.  `lsblk` (Để xem tên ổ đĩa/phân vùng, ví dụ: `xvda` và `xvda1`)
2.  `df -hT` (Để xem dung lượng hiện tại và loại filesystem, ví dụ: `ext4`)
3.  `sudo growpart /dev/xvda 1` (Thay `/dev/xvda` và `1` cho đúng - đưa hết phần vùng còn trống cho phân vùng 1 )
4.  `sudo resize2fs /dev/xvda1` (Nếu là `ext4`) **HOẶC** `sudo xfs_growfs -d /` (Nếu là `xfs`)
5.  `df -hT` (Để xác nhận lại)

---

xóa container đã tải để nhẹ ec2

# xóa sạch mọi thứ cách tàn bạo nhất

# 1. Dừng tất cả container đang chạy

docker stop $(docker ps -aq)

# 2. Xóa tất cả container

docker rm $(docker ps -aq)

# 3. Xóa tất cả images

docker rmi $(docker images -q)

# 4. Xóa tất cả volumes

docker volume rm $(docker volume ls -q)

# 5. Xóa tất cả networks

docker network rm $(docker network ls -q)

---

# xóa sạch mọi thứ a-z (không xóa volume)

docker system prune -a

# xóa container đã dừng

docker container prune

# Thêm cờ -a để xóa cả những image có tag nhưng không được container nào dùng

docker image prune -a

# xóa image không dùng (Nếu không có cờ -a, nó chỉ xóa các image "lơ lửng" (dangling) - tức là các image không có tag).

docker image prune

# xóa volume không dùng

docker volume prune

# xóa network không dùng

docker network prune
