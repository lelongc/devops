### ğŸ” **VÃ¬ sao chá»n Load Balancer?**
<img width="1575" height="2048" alt="17544461432561820037390697314530" src="https://github.com/user-attachments/assets/20d9282b-5ab4-4658-b4a2-08c053b8e3fe" />

---

# 6 CÃ´ng Dá»¥ng "VÃ ng" cá»§a Load Balancer MÃ  Má»i Láº­p TrÃ¬nh ViÃªn Cáº§n Náº¯m Vá»¯ng


Khi xÃ¢y dá»±ng báº¥t ká»³ há»‡ thá»‘ng nÃ o, tá»« má»™t trang web Ä‘Æ¡n giáº£n Ä‘áº¿n má»™t á»©ng dá»¥ng microservices phá»©c táº¡p, chÃºng ta Ä‘á»u mong muá»‘n nÃ³ hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh, nhanh chÃ³ng vÃ  cÃ³ thá»ƒ Ä‘Ã¡p á»©ng Ä‘Æ°á»£c lÆ°á»£ng ngÆ°á»i dÃ¹ng ngÃ y cÃ ng tÄƒng. "NgÆ°á»i hÃ¹ng" tháº§m láº·ng Ä‘á»©ng sau nhá»¯ng yÃªu cáº§u Ä‘Ã³ chÃ­nh lÃ  **Load Balancer (Bá»™ cÃ¢n báº±ng táº£i)**.

> Load Balancer khÃ´ng chá»‰ Ä‘Æ¡n thuáº§n lÃ  má»™t "bá»™ chia traffic" Ä‘Ã¢u. NÃ³ lÃ  má»™t "nháº¡c trÆ°á»Ÿng" thÃ´ng minh, Ä‘iá»u phá»‘i vÃ  tá»‘i Æ°u hÃ³a luá»“ng giao thÃ´ng Ä‘áº¿n á»©ng dá»¥ng cá»§a báº¡n. DÆ°á»›i Ä‘Ã¢y lÃ  6 cÃ´ng dá»¥ng quan trá»ng nháº¥t cá»§a nÃ³, Ä‘Æ°á»£c phÃ¢n tÃ¡ch má»™t cÃ¡ch rÃµ rÃ ng.

---

## 1. PhÃ¢n phá»‘i LÆ°u lÆ°á»£ng & Má»Ÿ rá»™ng Quy mÃ´ (Traffic Distribution & Scalability) ğŸš€

**âš™ï¸ KhÃ¡i niá»‡m:**  
Load Balancer hoáº¡t Ä‘á»™ng nhÆ° má»™t Ä‘iá»ƒm vÃ o duy nháº¥t (single entry point) cho táº¥t cáº£ cÃ¡c yÃªu cáº§u tá»« ngÆ°á»i dÃ¹ng, sá»­ dá»¥ng cÃ¡c thuáº­t toÃ¡n (vÃ­ dá»¥: Round Robin, Least Connections) Ä‘á»ƒ phÃ¢n phá»‘i Ä‘á»u yÃªu cáº§u Ä‘áº¿n nhÃ³m backend server. Khi lÆ°á»£ng truy cáº­p tÄƒng lÃªn, báº¡n cÃ³ thá»ƒ dá»… dÃ ng thÃªm server má»›i (horizontal scaling), vÃ  Load Balancer sáº½ phÃ¢n phá»‘i traffic Ä‘áº¿n cÃ¡c server má»›i nÃ y. Trong mÃ´i trÆ°á»ng Ä‘Ã¡m mÃ¢y, nÃ³ cÃ²n cÃ³ thá»ƒ phÃ¢n phá»‘i traffic giá»¯a cÃ¡c khu vá»±c sáºµn sÃ ng (Availability Zones - AZ) khÃ¡c nhau.

**âœ… Lá»£i Ã­ch:**
- TrÃ¡nh quÃ¡ táº£i: Äáº£m báº£o khÃ´ng cÃ³ server Ä‘Æ¡n láº» nÃ o pháº£i "gÃ¡nh" quÃ¡ nhiá»u viá»‡c.
- TÄƒng kháº£ nÄƒng má»Ÿ rá»™ng (Scalability): Dá»… dÃ ng Ä‘Ã¡p á»©ng lÆ°u lÆ°á»£ng truy cáº­p tÄƒng Ä‘á»™t biáº¿n.
- Tá»‘i Æ°u hÃ³a viá»‡c sá»­ dá»¥ng tÃ i nguyÃªn.

**ğŸ¯ TrÆ°á»ng há»£p sá»­ dá»¥ng:**  
Má»™t trang web thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ cÃ³ chÆ°Æ¡ng trÃ¬nh khuyáº¿n mÃ£i lá»›n, lÆ°á»£ng truy cáº­p tÄƒng gáº¥p 10 láº§n. Chá»‰ cáº§n thÃªm 5 server má»›i vÃ o nhÃ³m, Load Balancer sáº½ xá»­ lÃ½ lÆ°á»£ng táº£i tÄƒng thÃªm mÃ  khÃ´ng bá»‹ sáº­p.

---

## 2. TÄƒng cÆ°á»ng TÃ­nh sáºµn sÃ ng cao & Xá»­ lÃ½ Lá»—i (High Availability & Failure Handling) ğŸ’ª

**âš™ï¸ KhÃ¡i niá»‡m:**  
Load Balancer liÃªn tá»¥c kiá»ƒm tra "sá»©c khá»e" cá»§a cÃ¡c server. Khi phÃ¡t hiá»‡n server gáº·p sá»± cá»‘, nÃ³ sáº½ loáº¡i server Ä‘Ã³ ra khá»i danh sÃ¡ch nháº­n traffic vÃ  chuyá»ƒn hÆ°á»›ng yÃªu cáº§u sang cÃ¡c server cÃ²n láº¡i. QuÃ¡ trÃ¬nh nÃ y hoÃ n toÃ n tá»± Ä‘á»™ng.

**âœ… Lá»£i Ã­ch:**
- TrÃ¡nh downtime: Há»‡ thá»‘ng khÃ´ng bá»‹ "sáº­p" hoÃ n toÃ n khi má»™t thÃ nh pháº§n bá»‹ lá»—i.
- TÄƒng Ä‘á»™ tin cáº­y (Reliability).
- Tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng liá»n máº¡ch.

**ğŸ¯ TrÆ°á»ng há»£p sá»­ dá»¥ng:**  
Há»‡ thá»‘ng cÃ³ hai web server, má»™t server bá»‹ lá»—i do trÃ n bá»™ nhá»›. Load Balancer phÃ¡t hiá»‡n vÃ  chuyá»ƒn toÃ n bá»™ traffic sang server cÃ²n láº¡i. NgÆ°á»i dÃ¹ng váº«n truy cáº­p bÃ¬nh thÆ°á»ng.

---

## 3. GiÃ¡m sÃ¡t "Sá»©c khá»e" Há»‡ thá»‘ng (Health Monitoring) â¤ï¸â€ğŸ©¹

**âš™ï¸ KhÃ¡i niá»‡m:**  
Load Balancer Ä‘á»‹nh ká»³ gá»­i cÃ¡c yÃªu cáº§u kiá»ƒm tra nhá» (health check) Ä‘áº¿n endpoint cáº¥u hÃ¬nh sáºµn trÃªn backend server (vÃ­ dá»¥: /health tráº£ vá» mÃ£ 200 OK). Dá»±a vÃ o pháº£n há»“i, Load Balancer biáº¿t server Ä‘Ã³ cÃ³ "khá»e" hay khÃ´ng.

**âœ… Lá»£i Ã­ch:**
- PhÃ¡t hiá»‡n lá»—i chá»§ Ä‘á»™ng.
- Tá»± Ä‘á»™ng phá»¥c há»“i: Khi server khá»e láº¡i, Load Balancer tá»± Ä‘á»™ng thÃªm vÃ o nhÃ³m.

**ğŸ¯ TrÆ°á»ng há»£p sá»­ dá»¥ng:**  
Health check gá»i Ä‘áº¿n endpoint /api/status má»—i 10 giÃ¢y. Náº¿u khÃ´ng tráº£ vá» mÃ£ 200 trong 3 láº§n liÃªn tiáº¿p, server sáº½ bá»‹ Ä‘Ã¡nh dáº¥u lÃ  "unhealthy".

---

## 4. Giáº£m táº£i SSL (SSL Termination) ğŸ›¡ï¸

**âš™ï¸ KhÃ¡i niá»‡m:**  
Káº¿t ná»‘i HTTPS yÃªu cáº§u quÃ¡ trÃ¬nh báº¯t tay (handshake) vÃ  giáº£i mÃ£ SSL/TLS, tiÃªu tá»‘n nhiá»u CPU. Load Balancer cÃ³ thá»ƒ Ä‘áº£m nhiá»‡m toÃ n bá»™ viá»‡c nÃ y, giáº£i mÃ£ request tá»« ngÆ°á»i dÃ¹ng rá»“i chuyá»ƒn tiáº¿p request HTTP khÃ´ng mÃ£ hÃ³a Ä‘áº¿n backend server qua máº¡ng ná»™i bá»™ an toÃ n.

**âœ… Lá»£i Ã­ch:**
- Giáº£m táº£i cho backend.
- Quáº£n lÃ½ chá»©ng chá»‰ táº­p trung.
- TÄƒng hiá»‡u suáº¥t tá»•ng thá»ƒ.

**ğŸ¯ TrÆ°á»ng há»£p sá»­ dá»¥ng:**  
Kiáº¿n trÃºc microservices vá»›i hÃ ng trÄƒm service, chá»‰ cáº§n cáº¥u hÃ¬nh SSL má»™t láº§n duy nháº¥t táº¡i Load Balancer Ä‘áº§u vÃ o.

---

## 5. Duy trÃ¬ PhiÃªn lÃ m viá»‡c (Session Persistence / Stickiness) ğŸª

**âš™ï¸ KhÃ¡i niá»‡m:**  
Äá»‘i vá»›i cÃ¡c á»©ng dá»¥ng cáº§n duy trÃ¬ tráº¡ng thÃ¡i (stateful), Session Stickiness Ä‘áº£m báº£o táº¥t cáº£ request tá»« má»™t ngÆ°á»i dÃ¹ng cá»¥ thá»ƒ luÃ´n Ä‘Æ°á»£c Ä‘á»‹nh tuyáº¿n Ä‘áº¿n cÃ¹ng má»™t backend server trong suá»‘t phiÃªn, thÆ°á»ng dá»±a vÃ o cookie.

**âœ… Lá»£i Ã­ch:**
- Äáº£m báº£o tÃ­nh nháº¥t quÃ¡n dá»¯ liá»‡u phiÃªn.
- TÄƒng Ä‘á»™ á»•n Ä‘á»‹nh.

**ğŸ¯ TrÆ°á»ng há»£p sá»­ dá»¥ng:**  
NgÆ°á»i dÃ¹ng Ä‘iá»n biá»ƒu máº«u nhiá»u bÆ°á»›c. Session stickiness Ä‘áº£m báº£o há» luÃ´n á»Ÿ trÃªn cÃ¹ng má»™t server, khÃ´ng bá»‹ máº¥t dá»¯ liá»‡u khi chuyá»ƒn bÆ°á»›c.

---

## 6. Äá»‹nh tuyáº¿n ThÃ´ng minh (Advanced/Smart Routing) ğŸ—ºï¸

**âš™ï¸ KhÃ¡i niá»‡m:**  
Load Balancer hiá»‡n Ä‘áº¡i (Layer 7) cÃ³ thá»ƒ "Ä‘á»c" ná»™i dung request (URL path, header, cookie...) vÃ  Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh Ä‘á»‹nh tuyáº¿n thÃ´ng minh, khÃ´ng chá»‰ chia Ä‘á»u traffic.

**âœ… Lá»£i Ã­ch:**
- Tá»‘i Æ°u hÃ³a tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng: VÃ­ dá»¥, Ä‘á»‹nh tuyáº¿n ngÆ°á»i dÃ¹ng mobile Ä‘áº¿n giao diá»‡n mobile.
- Triá»ƒn khai linh hoáº¡t: A/B Testing, Blue-Green Deployment, Canary Releases.

**ğŸ¯ TrÆ°á»ng há»£p sá»­ dá»¥ng:**  
Ra máº¯t tÃ­nh nÄƒng má»›i, cáº¥u hÃ¬nh Load Balancer Ä‘á»ƒ 5% traffic cÃ³ Ä‘Æ°á»ng dáº«n /new-feature gá»­i Ä‘áº¿n nhÃ³m server má»›i, 95% cÃ²n láº¡i váº«n Ä‘i há»‡ thá»‘ng cÅ©.

---

**Hy vá»ng bÃ i viáº¿t nÃ y giÃºp báº¡n hiá»ƒu rÃµ hÆ¡n vá» Load Balancer vÃ  nhá»¯ng cÃ´ng dá»¥ng "vÃ ng" mÃ  nÃ³ mang láº¡i cho há»‡ thá»‘ng cá»§a báº¡n!**
