### 1. `kube-scheduler` - "NhÃ  Äiá»u phá»‘i" ThÃ´ng minh cá»§a Kubernetes ğŸ§ 

- **Nhiá»‡m vá»¥ chÃ­nh:** `kube-scheduler` chá»‹u trÃ¡ch nhiá»‡m **QUYáº¾T Äá»ŠNH** xem má»™t Pod má»›i nÃªn Ä‘Æ°á»£c cháº¡y trÃªn **Worker Node** nÃ o.
- **Äiá»ƒm khÃ¡c biá»‡t quan trá»ng cáº§n nhá»›:**

  - Scheduler chá»‰ cÃ³ vai trÃ² lÃ  "chá»‰ Ä‘á»‹nh". NÃ³ ra quyáº¿t Ä‘á»‹nh: "Pod A sáº½ cháº¡y trÃªn Node B".
  - NÃ³ **KHÃ”NG** pháº£i lÃ  ngÆ°á»i thá»±c sá»± Ä‘áº·t Pod lÃªn Node Ä‘Ã³. CÃ´ng viá»‡c Ä‘Ã³ thuá»™c vá» **`kubelet`** trÃªn Node B.

---

### 2. Táº¡i sao chÃºng ta cáº§n Scheduler? ğŸ¤”

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ ráº¥t nhiá»u container (hÃ ng hÃ³a) vÃ  ráº¥t nhiá»u node (tÃ u). Báº¡n cáº§n má»™t ngÆ°á»i Ä‘iá»u phá»‘i thÃ´ng minh Ä‘á»ƒ:

- Äáº£m báº£o container khÃ´ng bá»‹ Ä‘áº·t lÃªn con tÃ u Ä‘Ã£ quÃ¡ táº£i.
- Äáº£m báº£o container cáº§n nhiá»u "khÃ´ng gian" (tÃ i nguyÃªn) Ä‘Æ°á»£c Ä‘áº·t lÃªn con tÃ u Ä‘á»§ lá»›n.
- Äáº£m báº£o container cÃ³ yÃªu cáº§u Ä‘áº·c biá»‡t (vÃ­ dá»¥: chá»‰ Ä‘i Ä‘áº¿n cáº£ng X) Ä‘Æ°á»£c Ä‘áº·t lÃªn Ä‘Ãºng con tÃ u cÃ³ lá»™ trÃ¬nh Ä‘Ã³.

Trong Kubernetes cÅ©ng váº­y, Scheduler Ä‘áº£m báº£o cÃ¡c Pod Ä‘Æ°á»£c Ä‘áº·t lÃªn cÃ¡c Node phÃ¹ há»£p nháº¥t dá»±a trÃªn nhiá»u tiÃªu chÃ­ khÃ¡c nhau.

---

### 3. Quy trÃ¬nh "Tuyá»ƒn chá»n" Node cá»§a Scheduler (2 Giai Ä‘oáº¡n) âœ…

Khi cÃ³ má»™t Pod má»›i Ä‘Æ°á»£c táº¡o vÃ  chÆ°a Ä‘Æ°á»£c gÃ¡n cho Node nÃ o, `kube-scheduler` sáº½ báº¯t Ä‘áº§u quy trÃ¬nh "tuyá»ƒn chá»n" qua 2 giai Ä‘oáº¡n:

#### a. Giai Ä‘oáº¡n 1: Lá»c (Filtering)

- á» giai Ä‘oáº¡n nÃ y, scheduler sáº½ loáº¡i bá» táº¥t cáº£ cÃ¡c Node **KHÃ”NG PHÃ™ Há»¢P**.
- _VÃ­ dá»¥:_ Pod cá»§a báº¡n yÃªu cáº§u 2 CPU vÃ  4GB RAM. Scheduler sáº½ lá»c ra táº¥t cáº£ cÃ¡c Node khÃ´ng cÃ²n Ä‘á»§ 2 CPU hoáº·c 4GB RAM trá»‘ng.
- Káº¿t thÃºc giai Ä‘oáº¡n nÃ y, chÃºng ta sáº½ cÃ³ má»™t danh sÃ¡ch cÃ¡c Node "tiá»m nÄƒng" cÃ³ thá»ƒ cháº¡y Ä‘Æ°á»£c Pod.

#### b. Giai Ä‘oáº¡n 2: Cháº¥m Ä‘iá»ƒm & Xáº¿p háº¡ng (Scoring & Ranking)

- Tá»« danh sÃ¡ch cÃ¡c Node tiá»m nÄƒng á»Ÿ trÃªn, scheduler sáº½ tiáº¿n hÃ nh **cháº¥m Ä‘iá»ƒm** cho tá»«ng Node theo thang Ä‘iá»ƒm tá»« 0 Ä‘áº¿n 10.
- NÃ³ sá»­ dá»¥ng cÃ¡c hÃ m Æ°u tiÃªn (priority functions) Ä‘á»ƒ tÃ­nh Ä‘iá»ƒm.
- _VÃ­ dá»¥:_ Má»™t hÃ m cÃ³ thá»ƒ cháº¥m Ä‘iá»ƒm cao hÆ¡n cho Node nÃ o mÃ  sau khi Ä‘áº·t Pod lÃªn váº«n cÃ²n dÆ° nhiá»u tÃ i nguyÃªn nháº¥t.
- Cuá»‘i cÃ¹ng, Node cÃ³ **sá»‘ Ä‘iá»ƒm cao nháº¥t** sáº½ Ä‘Æ°á»£c chá»n Ä‘á»ƒ cháº¡y Pod.

> Quy trÃ¬nh nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¹y chá»‰nh vÃ  tháº­m chÃ­ báº¡n cÃ³ thá»ƒ tá»± viáº¿t scheduler cá»§a riÃªng mÃ¬nh. CÃ³ ráº¥t nhiá»u khÃ¡i niá»‡m nÃ¢ng cao liÃªn quan nhÆ° Taints & Tolerations, Node Selectors, Affinity,... sáº½ Ä‘Æ°á»£c tÃ¬m hiá»ƒu sÃ¢u hÆ¡n sau nÃ y.

---

### 4. CÃ i Ä‘áº·t vÃ  Xem Cáº¥u hÃ¬nh

- **Vá»›i cá»¥m `kubeadm`:** `kube-scheduler` Ä‘Æ°á»£c triá»ƒn khai nhÆ° má»™t **static Pod** trong namespace `kube-system`. Báº¡n cÃ³ thá»ƒ xem cáº¥u hÃ¬nh trong file manifest cá»§a Pod táº¡i `/etc/kubernetes/manifests/`.
- **CÃ¡ch chung:** DÃ¹ng lá»‡nh `ps aux | grep kube-scheduler` trÃªn Master Node Ä‘á»ƒ xem tiáº¿n trÃ¬nh Ä‘ang cháº¡y vÃ  cÃ¡c tham sá»‘ cá»§a nÃ³.

---

### 5. "Chá»‘t háº¡" cho Ká»³ thi CKA ğŸ“

- Nhiá»‡m vá»¥ cá»§a `kube-scheduler` lÃ  **QUYáº¾T Äá»ŠNH**, cÃ²n nhiá»‡m vá»¥ cá»§a `kubelet` lÃ  **THá»°C THI** viá»‡c Ä‘áº·t Pod lÃªn Node. Pháº£i phÃ¢n biá»‡t rÃµ rÃ ng hai vai trÃ² nÃ y.
- Náº¯m vá»¯ng quy trÃ¬nh 2 giai Ä‘oáº¡n: **Lá»c (Filtering)** Ä‘á»ƒ loáº¡i bá» cÃ¡c node khÃ´ng phÃ¹ há»£p vÃ  **Cháº¥m Ä‘iá»ƒm (Scoring)** Ä‘á»ƒ chá»n ra node tá»‘t nháº¥t.
- Biáº¿t cÃ¡ch tÃ¬m file cáº¥u hÃ¬nh cá»§a scheduler trong má»™t cá»¥m `kubeadm` (nÃ³ lÃ  má»™t **static Pod**).

Scheduler Ä‘Ã³ng vai trÃ² then chá»‘t trong viá»‡c Ä‘áº£m báº£o cÃ¡c á»©ng dá»¥ng cá»§a báº¡n Ä‘Æ°á»£c phÃ¢n bá»• má»™t cÃ¡ch tá»‘i Æ°u vÃ  hiá»‡u quáº£ trÃªn toÃ n bá»™ cá»¥m. ChÃºc báº¡n má»™t buá»•i chiá»u há»c táº­p hiá»‡u quáº£!
