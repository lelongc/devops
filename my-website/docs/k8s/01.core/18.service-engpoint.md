### 1. Endpoints lÃ  gÃ¬? "Sá»• Ä‘á»‹a chá»‰" cá»§a Service ğŸ“–

HÃ£y hÃ¬nh dung tháº¿ nÃ y:

- **Service** giá»‘ng nhÆ° má»™t **sá»‘ tá»•ng Ä‘Ã i chung** cá»§a má»™t cÃ´ng ty. Báº¡n chá»‰ cáº§n gá»i má»™t sá»‘ duy nháº¥t.
- **Pods** giá»‘ng nhÆ° cÃ¡c **nhÃ¢n viÃªn** trong cÃ´ng ty, má»—i ngÆ°á»i cÃ³ má»™t sá»‘ mÃ¡y láº» (Ä‘á»‹a chá»‰ IP) riÃªng vÃ  luÃ´n thay Ä‘á»•i.
- **Endpoints** chÃ­nh lÃ  **cuá»‘n danh báº¡ ná»™i bá»™** cá»§a tá»•ng Ä‘Ã i Ä‘Ã³. Cuá»‘n danh báº¡ nÃ y ghi rÃµ: "Äá»ƒ gáº·p nhÃ¢n viÃªn A, hÃ£y ná»‘i mÃ¡y Ä‘áº¿n sá»‘ 101. Äá»ƒ gáº·p nhÃ¢n viÃªn B, hÃ£y ná»‘i mÃ¡y Ä‘áº¿n sá»‘ 102...".

Vá» máº·t ká»¹ thuáº­t, **Endpoints** lÃ  má»™t Ä‘á»‘i tÆ°á»£ng trong Kubernetes, chá»©a má»™t danh sÃ¡ch cÃ¡c cáº·p Ä‘á»‹a chá»‰ **`IP:Port`** cá»§a cÃ¡c Pod "tháº­t" mÃ  má»™t Service Ä‘ang trá» tá»›i.

---

### 2. Má»‘i quan há»‡ "KhÄƒng khÃ­t": Service, Selector, Labels, vÃ  Endpoints

CÆ¡ cháº¿ nÃ y hoáº¡t Ä‘á»™ng nhÆ° má»™t chuá»—i domino:

1. **Báº¡n gáº¯n `labels` (nhÃ£n) cho cÃ¡c Pod cá»§a mÃ¬nh.**

   - VÃ­ dá»¥: `app: my-frontend`

2. **Báº¡n táº¡o má»™t Service vÃ  Ä‘á»‹nh nghÄ©a má»™t `selector`.**

   - Selector nÃ y sáº½ tÃ¬m cÃ¡c Pod cÃ³ nhÃ£n tÆ°Æ¡ng á»©ng. VÃ­ dá»¥: `selector: { app: my-frontend }`

3. **Kubernetes tá»± Ä‘á»™ng lÃ m viá»‡c:**

   - Kubernetes Service controller sáº½ quÃ©t toÃ n bá»™ cá»¥m Ä‘á»ƒ tÃ¬m cÃ¡c Pod cÃ³ label lÃ  `app: my-frontend`.
   - Vá»›i má»—i Pod tÃ¬m tháº¥y, nÃ³ sáº½ láº¥y Ä‘á»‹a chá»‰ IP vÃ  `targetPort` cá»§a Pod Ä‘Ã³.
   - NÃ³ **tá»± Ä‘á»™ng táº¡o vÃ  cáº­p nháº­t** má»™t Ä‘á»‘i tÆ°á»£ng tÃªn lÃ  **Endpoints** vá»›i danh sÃ¡ch cÃ¡c cáº·p `IP:Port` vá»«a tÃ¬m Ä‘Æ°á»£c.

> **Káº¿t luáº­n:** Äá»‘i tÆ°á»£ng **Endpoints** lÃ  **káº¿t quáº£** cá»§a viá»‡c `selector` trong Service káº¿t ná»‘i thÃ nh cÃ´ng vá»›i `labels` trÃªn cÃ¡c Pod. NÃ³ lÃ  danh sÃ¡ch cá»¥ thá»ƒ nhá»¯ng nÆ¡i mÃ  traffic sáº½ thá»±c sá»± Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n.

---

### 3. Táº¡i sao Endpoints lÃ  cÃ´ng cá»¥ "Debug" tháº§n thÃ¡nh? ğŸ•µï¸â€â™‚ï¸

viá»‡c kiá»ƒm tra danh sÃ¡ch Endpoints lÃ  má»™t trong nhá»¯ng bÆ°á»›c Ä‘áº§u tiÃªn vÃ  hiá»‡u quáº£ nháº¥t khi báº¡n gáº·p sá»± cá»‘ vá»›i Service. CÃ³ hai ká»‹ch báº£n phá»• biáº¿n:

#### Ká»‹ch báº£n 1: KhÃ´ng thá»ƒ truy cáº­p Service (0 Endpoints)

- **Triá»‡u chá»©ng:** Báº¡n Ä‘Ã£ táº¡o Service, nhÆ°ng khi cá»‘ gáº¯ng káº¿t ná»‘i vÃ o thÃ¬ bá»‹ tá»« chá»‘i hoáº·c khÃ´ng cÃ³ pháº£n há»“i.
- **Cháº©n Ä‘oÃ¡n:** Cháº¡y lá»‡nh `kubectl describe service <tÃªn-service>`.
- **Káº¿t quáº£:** Báº¡n nhÃ¬n vÃ o dÃ²ng `Endpoints` vÃ  tháº¥y: **`<none>`**.
- **Ã nghÄ©a:** ÄÃ¢y lÃ  má»™t dáº¥u hiá»‡u cá»±c lá»›n! NÃ³ cÃ³ nghÄ©a lÃ  `selector` cá»§a Service Ä‘Ã£ **khÃ´ng tÃ¬m tháº¥y Báº¤T Ká»² Pod nÃ o** cÃ³ `label` khá»›p.
- **NguyÃªn nhÃ¢n thÆ°á»ng gáº·p:** GÃµ nháº§m `label` trong file Ä‘á»‹nh nghÄ©a Pod, hoáº·c gÃµ nháº§m `selector` trong file Ä‘á»‹nh nghÄ©a Service.

#### Ká»‹ch báº£n 2: Service hoáº¡t Ä‘á»™ng láº¡, gá»­i traffic Ä‘áº¿n "nháº§m" Pod (QuÃ¡ nhiá»u Endpoints)

- **Triá»‡u chá»©ng:** á»¨ng dá»¥ng cá»§a báº¡n hoáº¡t Ä‘á»™ng khÃ´ng á»•n Ä‘á»‹nh. ÄÃ´i khi request thÃ nh cÃ´ng, Ä‘Ã´i khi láº¡i lá»—i má»™t cÃ¡ch khÃ³ hiá»ƒu.
- **Cháº©n Ä‘oÃ¡n:** Cháº¡y lá»‡nh `kubectl describe service <tÃªn-service>`.
- **Káº¿t quáº£:** Báº¡n nghÄ© ráº±ng Service chá»‰ nÃªn trá» Ä‘áº¿n 3 Pod backend cá»§a mÃ¬nh, nhÆ°ng trong danh sÃ¡ch Endpoints láº¡i cÃ³ tá»›i **4 Ä‘á»‹a chá»‰ IP**.
- **Ã nghÄ©a:** CÃ³ má»™t Pod "láº¡c loÃ i" nÃ o Ä‘Ã³ trong cá»¥m Ä‘Ã£ vÃ´ tÃ¬nh Ä‘Æ°á»£c gáº¯n cÃ¹ng `label` vá»›i cÃ¡c Pod backend cá»§a báº¡n. Do Ä‘Ã³, Service Ä‘Ã£ "nháº­n nháº§m" nÃ³ lÃ  thÃ nh viÃªn vÃ  Ä‘ang gá»­i má»™t pháº§n traffic Ä‘áº¿n Ä‘Ã³, gÃ¢y ra lá»—i.

---

### 4. "Chá»‘t háº¡"

- **Endpoints** lÃ  cáº§u ná»‘i **thá»±c sá»±** giá»¯a Service (áº£o) vÃ  Pods (tháº­t). NÃ³ khÃ´ng pháº£i lÃ  thá»© báº¡n táº¡o ra báº±ng tay, mÃ  Ä‘Æ°á»£c Kubernetes tá»± Ä‘á»™ng quáº£n lÃ½.
- Khi Service cá»§a báº¡n khÃ´ng hoáº¡t Ä‘á»™ng nhÆ° mong Ä‘á»£i, lá»‡nh Ä‘áº§u tiÃªn báº¡n nÃªn nghÄ© Ä‘áº¿n lÃ  **`kubectl describe service ...`** vÃ  kiá»ƒm tra tháº­t ká»¹ dÃ²ng **`Endpoints`**. NÃ³ sáº½ cho báº¡n biáº¿t chÃ­nh xÃ¡c liá»‡u Service cÃ³ Ä‘ang "nhÃ¬n" tháº¥y Ä‘Ãºng cÃ¡c Pod mÃ  nÃ³ cáº§n hay khÃ´ng.
