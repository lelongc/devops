### 1\. Bốn "Trụ cột" của một file YAML trong Kubernetes

Mọi file định nghĩa đối tượng trong Kubernetes (dù là Pod, Service, hay Deployment,...) đều phải có **4 trường (fields) ở cấp cao nhất**. Đây là các trường bắt buộc:

1. **`apiVersion`**:

   - **Là gì?** Phiên bản của Kubernetes API mà bạn đang sử dụng để tạo đối tượng.
   - **Ví dụ (cho Pod):** `v1`

2. **`kind`**:

   - **Là gì?** Loại đối tượng mà bạn đang muốn tạo.
   - **Ví dụ (cho Pod):** `Pod`

3. **`metadata`**:

   - **Là gì?** "Dữ liệu về dữ liệu" - tức là các thông tin mô tả về đối tượng, như tên, nhãn,... Đây là một dictionary (đối tượng).
   - **`name`**: Tên của Pod (ví dụ: `my-app-pod`).
   - **`labels`**: Một dictionary chứa các cặp key-value (nhãn). Labels cực kỳ quan trọng, giúp bạn lọc và nhóm các đối tượng sau này (ví dụ: `app: my-app`, `env: production`).

4. **`spec`** (viết tắt của Specification):

   - **Là gì?** Đây là phần quan trọng nhất, nơi bạn định nghĩa **trạng thái mong muốn** của đối tượng.
   - Cấu trúc của `spec` sẽ **khác nhau tùy thuộc vào `kind`** của đối tượng.

> ⚠️ **Lưu ý về thụt đầu dòng (indentation) trong YAML:** YAML rất nhạy cảm với khoảng trắng. Các thuộc tính con phải được thụt vào so với thuộc tính cha, và các thuộc tính ngang hàng phải có cùng mức thụt lề.

---

### 2\. "Mổ xẻ" phần `spec` của một Pod

Đối với một đối tượng có `kind: Pod`, phần `spec` sẽ mô tả các container sẽ chạy bên trong Pod đó.

- `spec` chứa một thuộc tính quan trọng là **`containers`**.
- **`containers`** là một **danh sách (list/array)**. Lý do nó là một danh sách vì một Pod có thể chứa nhiều container.
- Mỗi mục trong danh sách `containers` là một dictionary mô tả một container, với hai thuộc tính bắt buộc:
  - **`name`**: Tên bạn đặt cho container (ví dụ: `nginx-container`).
  - **`image`**: Tên của Docker image sẽ được sử dụng để chạy container (ví dụ: `nginx`).

---

### 3\. Ví dụ một file `pod-definition.yaml` hoàn chỉnh

Đây là một file YAML đầy đủ để tạo một Pod đơn giản chạy NGINX:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: my-app-pod
  labels:
    app: my-app
spec:
  containers:
    - name: nginx-container
      image: nginx
```

---

### 4\. Thực thi và Kiểm tra

Sau khi bạn đã tạo file `pod-definition.yaml`, hãy dùng các lệnh sau:

- **Tạo Pod từ file YAML:**

  ```bash
  kubectl create -f pod-definition.yaml
  ```

- **Xem danh sách các Pod để kiểm tra:**

  ```bash
  kubectl get pods
  ```

- **Xem thông tin chi tiết về Pod vừa tạo:**

  ```bash
  kubectl describe pod my-app-pod
  ```

  Lệnh `describe` sẽ cho bạn thấy mọi thông tin chi tiết: labels, IP, container image, và quan trọng là các **sự kiện (Events)** liên quan đến vòng đời của Pod.

---

### 5\. "Chốt hạ" cho Kỳ thi CKA 📝

- Luôn nhớ 4 trường bắt buộc ở cấp cao nhất: **`apiVersion`**, **`kind`**, **`metadata`**, và **`spec`**.
- Đối với `Pod`, `apiVersion` là `v1`.
- Trong `metadata`, hai trường quan trọng là `name` và `labels`.
- Trong `spec` của Pod, phần quan trọng nhất là danh sách `containers`, nơi bạn định nghĩa `name` và `image` cho mỗi container.
- Lệnh để tạo tài nguyên từ file YAML là **`kubectl create -f <tên-file.yaml>`**.

---
