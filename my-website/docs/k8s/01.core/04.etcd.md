## 1\. `etcd` lÃ  gÃ¬?

Báº¡n cÃ³ thá»ƒ nghÄ© vá» **`etcd`** nhÆ° má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘áº·c biá»‡t. Theo Ä‘á»‹nh nghÄ©a, nÃ³ lÃ  má»™t **kho lÆ°u trá»¯ khÃ³a-giÃ¡ trá»‹ (key-value store)** cÃ³ cÃ¡c Ä‘áº·c tÃ­nh sau:

- **PhÃ¢n tÃ¡n (Distributed):** Dá»¯ liá»‡u Ä‘Æ°á»£c tráº£i rá»™ng trÃªn nhiá»u mÃ¡y chá»§.
- **ÄÃ¡ng tin cáº­y (Reliable):** Äáº£m báº£o dá»¯ liá»‡u khÃ´ng bá»‹ máº¥t mÃ¡t.
- **ÄÆ¡n giáº£n, an toÃ n vÃ  nhanh chÃ³ng.**

Trong Kubernetes, `etcd` chÃ­nh lÃ  "bá»™ nÃ£o" lÆ°u trá»¯ toÃ n bá»™ tráº¡ng thÃ¡i vÃ  cáº¥u hÃ¬nh cá»§a cáº£ cá»¥m.

---

## 2\. Key-Value Store khÃ¡c gÃ¬ CÆ¡ sá»Ÿ dá»¯ liá»‡u truyá»n thá»‘ng (SQL)? ğŸ¤”

ÄÃ¢y lÃ  Ä‘iá»ƒm khÃ¡c biá»‡t cá»‘t lÃµi báº¡n cáº§n náº¯m:

- **CÆ¡ sá»Ÿ dá»¯ liá»‡u truyá»n thá»‘ng (SQL):**

  - LÆ°u dá»¯ liá»‡u dÆ°á»›i dáº¡ng **báº£ng (table)** vá»›i cÃ¡c **hÃ ng (row)** vÃ  **cá»™t (column)** Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a nghiÃªm ngáº·t.
  - _VÃ­ dá»¥:_ Má»™t báº£ng thÃ´ng tin nhÃ¢n viÃªn. Náº¿u báº¡n muá»‘n thÃªm má»™t loáº¡i thÃ´ng tin má»›i (vÃ­ dá»¥: `lÆ°Æ¡ng`), báº¡n pháº£i thÃªm má»™t cá»™t má»›i cho **toÃ n bá»™ báº£ng**, áº£nh hÆ°á»Ÿng Ä‘áº¿n táº¥t cáº£ cÃ¡c hÃ ng, ká»ƒ cáº£ nhá»¯ng ngÆ°á»i khÃ´ng cÃ³ thÃ´ng tin lÆ°Æ¡ng (dáº«n Ä‘áº¿n nhiá»u Ã´ trá»‘ng).

- **Kho lÆ°u trá»¯ Key-Value (nhÆ° `etcd`):**

  - LÆ°u thÃ´ng tin dÆ°á»›i dáº¡ng cÃ¡c cáº·p **KhÃ³a (Key) = GiÃ¡ trá»‹ (Value)**, giá»‘ng nhÆ° cÃ¡c **tÃ i liá»‡u (document)** riÃªng láº».
  - _VÃ­ dá»¥:_ Má»—i ngÆ°á»i cÃ³ má»™t "tÃ i liá»‡u" riÃªng. NgÆ°á»i Ä‘i lÃ m thÃ¬ cÃ³ trÆ°á»ng `lÆ°Æ¡ng` trong tÃ i liá»‡u cá»§a há». Há»c sinh thÃ¬ cÃ³ trÆ°á»ng `Ä‘iá»ƒm` trong tÃ i liá»‡u cá»§a há».
  - **Lá»£i Ã­ch:** Cáº¥u trÃºc ráº¥t **linh hoáº¡t**. Báº¡n cÃ³ thá»ƒ thÃªm má»™t trÆ°á»ng má»›i vÃ o má»™t tÃ i liá»‡u mÃ  khÃ´ng áº£nh hÆ°á»Ÿng gÃ¬ Ä‘áº¿n cÃ¡c tÃ i liá»‡u khÃ¡c. Dá»¯ liá»‡u phá»©c táº¡p thÆ°á»ng Ä‘Æ°á»£c lÆ°u dÆ°á»›i dáº¡ng JSON hoáº·c YAML.

---

## 3\. Báº¯t Ä‘áº§u vá»›i `etcd`

Viá»‡c cÃ i Ä‘áº·t vÃ  cháº¡y `etcd` ráº¥t Ä‘Æ¡n giáº£n:

1.  **Táº£i vá» (Download):** Láº¥y file nhá»‹ phÃ¢n (binary) phÃ¹ há»£p vá»›i há»‡ Ä‘iá»u hÃ nh cá»§a báº¡n tá»« trang GitHub cá»§a `etcd`.
2.  **Giáº£i nÃ©n (Unzip):** Giáº£i nÃ©n file vá»«a táº£i.
3.  **Cháº¡y (Run):** Cháº¡y file thá»±c thi `etcd`.
    - Máº·c Ä‘á»‹nh, `etcd` sáº½ khá»Ÿi Ä‘á»™ng má»™t dá»‹ch vá»¥ vÃ  láº¯ng nghe trÃªn cá»•ng **`2379`**.

Sau khi cháº¡y, báº¡n cÃ³ thá»ƒ dÃ¹ng má»™t "client" Ä‘á»ƒ giao tiáº¿p vá»›i nÃ³. Client máº·c Ä‘á»‹nh Ä‘i kÃ¨m lÃ  **`etcdctl`**.

---

## 4\. "CÃº lá»«a" vá» phiÃªn báº£n: `etcdctl` v2 vs. v3 âš ï¸

ÄÃ¢y lÃ  pháº§n **quan trá»ng nháº¥t vÃ  dá»… gÃ¢y nháº§m láº«n nháº¥t** cho ngÆ°á»i má»›i báº¯t Ä‘áº§u\!

Giá»¯a phiÃªn báº£n `etcd` v2 vÃ  v3 cÃ³ sá»± thay Ä‘á»•i lá»›n vá» API, dáº«n Ä‘áº¿n cÃ¡c lá»‡nh `etcdctl` cÅ©ng thay Ä‘á»•i theo.

- **LÃ m sao Ä‘á»ƒ biáº¿t `etcdctl` Ä‘ang dÃ¹ng API phiÃªn báº£n nÃ o?**

  - Cháº¡y lá»‡nh: `etcdctl version`
  - Lá»‡nh nÃ y sáº½ hiá»ƒn thá»‹ phiÃªn báº£n cá»§a cÃ´ng cá»¥ `etcdctl` vÃ  quan trá»ng hÆ¡n lÃ  **phiÃªn báº£n API** mÃ  nÃ³ Ä‘ang Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘á»ƒ sá»­ dá»¥ng (lÃ  `2` hoáº·c `3`).

- **LÃ m sao Ä‘á»ƒ chuyá»ƒn sang dÃ¹ng API v3?**

  - CÃ¡c phiÃªn báº£n `etcdctl` má»›i hÆ¡n thÆ°á»ng máº·c Ä‘á»‹nh dÃ¹ng API v3. NhÆ°ng náº¿u báº¡n gáº·p phiÃªn báº£n cÅ© hÆ¡n, báº¡n cáº§n ra lá»‡nh cho nÃ³ dÃ¹ng API v3.
  - CÃ¡ch tá»‘t nháº¥t lÃ  Ä‘áº·t biáº¿n mÃ´i trÆ°á»ng cho toÃ n bá»™ phiÃªn lÃ m viá»‡c cá»§a báº¡n báº±ng lá»‡nh:
    ```bash
    export ETCDCTL_API=3
    ```

- **So sÃ¡nh lá»‡nh giá»¯a v2 vÃ  v3:**

| TÃ¡c vá»¥            | Lá»‡nh API v2                           | Lá»‡nh API v3                     |
| :---------------- | :------------------------------------ | :------------------------------ |
| **LÆ°u giÃ¡ trá»‹**   | `etcdctl set key1 value1`             | `etcdctl put key1 value1`       |
| **Láº¥y giÃ¡ trá»‹**   | `etcdctl get key1`                    | `etcdctl get key1`              |
| **Xem phiÃªn báº£n** | `etcdctl --version` (lÃ  má»™t tÃ¹y chá»n) | `etcdctl version` (lÃ  má»™t lá»‡nh) |

Viá»‡c `set` Ä‘á»•i thÃ nh `put` lÃ  thay Ä‘á»•i dá»… nháº­n tháº¥y nháº¥t.

---

## 5\. "Chá»‘t háº¡" cho ngÆ°á»i má»›i báº¯t Ä‘áº§u ğŸ“

- **`etcd`** lÃ  má»™t kho lÆ°u trá»¯ **key-value** linh hoáº¡t, lÃ  "bá»™ nÃ£o" cá»§a Kubernetes.
- Viá»‡c cÃ i Ä‘áº·t vÃ  cháº¡y nÃ³ khÃ¡ Ä‘Æ¡n giáº£n, máº·c Ä‘á»‹nh á»Ÿ cá»•ng **2379**.
- Khi sá»­ dá»¥ng `etcdctl`, hÃ£y luÃ´n cháº¯c cháº¯n ráº±ng báº¡n Ä‘ang lÃ m viá»‡c vá»›i **API v3** báº±ng cÃ¡ch kiá»ƒm tra (`etcdctl version`) vÃ  thiáº¿t láº­p biáº¿n mÃ´i trÆ°á»ng (`export ETCDCTL_API=3`). ÄÃ¢y lÃ  máº¹o thá»±c táº¿ quan trá»ng nháº¥t Ä‘á»ƒ trÃ¡nh lá»—i khÃ´ng Ä‘Ã¡ng cÃ³.
