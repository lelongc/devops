### 1\. Namespace lÃ  gÃ¬? "NgÃ´i nhÃ " riÃªng trong cá»¥m Kubernetes ğŸ¡

HÃ£y tÆ°á»Ÿng tÆ°á»£ng cá»¥m Kubernetes cá»§a báº¡n lÃ  má»™t thÃ nh phá»‘. Thay vÃ¬ Ä‘á»ƒ táº¥t cáº£ má»i ngÆ°á»i sá»‘ng chung trong má»™t khu vá»±c há»—n loáº¡n, báº¡n cÃ³ thá»ƒ xÃ¢y nhiá»u **"ngÃ´i nhÃ " (Namespaces)** riÃªng biá»‡t.

- **Má»—i "ngÃ´i nhÃ " (Namespace)** cÃ³ thá»ƒ chá»©a cÃ¡c tÃ i nguyÃªn riÃªng cá»§a nÃ³ (Pods, Deployments, Services,...).
- **Trong cÃ¹ng má»™t nhÃ :** Má»i ngÆ°á»i (tÃ i nguyÃªn) cÃ³ thá»ƒ gá»i nhau báº±ng tÃªn (vÃ­ dá»¥: `web-pod` cÃ³ thá»ƒ gá»i `db-service` chá»‰ báº±ng tÃªn `db-service`).
- **Gá»i sang nhÃ  hÃ ng xÃ³m:** Náº¿u muá»‘n gá»i má»™t ngÆ°á»i á»Ÿ nhÃ  khÃ¡c, báº¡n pháº£i dÃ¹ng "Ä‘á»‹a chá»‰ Ä‘áº§y Ä‘á»§" cá»§a há» (vÃ­ dá»¥: `db-service.dev`).
- **Má»—i nhÃ  cÃ³ luáº­t riÃªng:** Báº¡n cÃ³ thá»ƒ Ä‘áº·t ra cÃ¡c chÃ­nh sÃ¡ch (Policies) vÃ  giá»›i háº¡n tÃ i nguyÃªn (Resource Quotas) cho tá»«ng nhÃ .

Vá» cÆ¡ báº£n, **Namespaces** cho phÃ©p báº¡n táº¡o ra cÃ¡c **cá»¥m áº£o (virtual clusters)** bÃªn trong má»™t cá»¥m Kubernetes váº­t lÃ½ duy nháº¥t.

---

### 2\. CÃ¡c Namespace Máº·c Ä‘á»‹nh

Khi má»™t cá»¥m Kubernetes Ä‘Æ°á»£c táº¡o, nÃ³ sáº½ cÃ³ sáºµn 3 Namespace:

- **`default`**: ÄÃ¢y lÃ  "ngÃ´i nhÃ " máº·c Ä‘á»‹nh. Náº¿u báº¡n táº¡o tÃ i nguyÃªn mÃ  khÃ´ng chá»‰ Ä‘á»‹nh namespace, nÃ³ sáº½ Ä‘Æ°á»£c táº¡o á»Ÿ Ä‘Ã¢y.
- **`kube-system`**: "PhÃ²ng ká»¹ thuáº­t" cá»§a Kubernetes. NÆ¡i chá»©a cÃ¡c thÃ nh pháº§n há»‡ thá»‘ng cá»‘t lÃµi nhÆ° DNS, `kube-proxy`,... Báº¡n khÃ´ng nÃªn "Ä‘á»¥ng" vÃ o namespace nÃ y.
- **`kube-public`**: NÆ¡i chá»©a cÃ¡c tÃ i nguyÃªn cáº§n Ä‘Æ°á»£c cÃ´ng khai vÃ  cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c bá»Ÿi táº¥t cáº£ ngÆ°á»i dÃ¹ng trong cá»¥m.

---

### 3\. Táº¡i sao vÃ  Khi nÃ o nÃªn dÃ¹ng Namespace?

- **Khi há»c hoáº·c dÃ¹ng cho dá»± Ã¡n nhá»:** DÃ¹ng namespace `default` lÃ  Ä‘á»§.
- **Trong mÃ´i trÆ°á»ng doanh nghiá»‡p/production:** Namespace cá»±c ká»³ quan trá»ng Ä‘á»ƒ:
  1. **CÃ´ láº­p cÃ¡c mÃ´i trÆ°á»ng:** Táº¡o cÃ¡c namespace riÃªng cho `dev`, `production`, `testing`... trÃªn cÃ¹ng má»™t cá»¥m. Äiá»u nÃ y giÃºp team dev khÃ´ng vÃ´ tÃ¬nh lÃ m áº£nh hÆ°á»Ÿng Ä‘áº¿n mÃ´i trÆ°á»ng production.
  2. **Quáº£n lÃ½ tÃ i nguyÃªn:** Ãp dá»¥ng **Resource Quotas** Ä‘á»ƒ giá»›i háº¡n lÆ°á»£ng CPU, Memory, sá»‘ lÆ°á»£ng Pod,... mÃ  má»—i namespace Ä‘Æ°á»£c phÃ©p sá»­ dá»¥ng.

---

### 4\. Giao tiáº¿p "HÃ ng xÃ³m" (Giá»¯a cÃ¡c Namespace)

- **Trong cÃ¹ng Namespace:** Má»™t Pod cÃ³ thá»ƒ gá»i má»™t Service chá»‰ báº±ng tÃªn cá»§a Service Ä‘Ã³.
- **KhÃ¡c Namespace:** Má»™t Pod pháº£i sá»­ dá»¥ng **TÃªn miá»n Ä‘áº§y Ä‘á»§ (Fully Qualified Domain Name - FQDN)**.
  - **CÃº phÃ¡p:** `<tÃªn-service>.<tÃªn-namespace>.svc.cluster.local`
  - _VÃ­ dá»¥:_ Má»™t Pod á»Ÿ namespace `default` muá»‘n gá»i `db-service` á»Ÿ namespace `dev` thÃ¬ sáº½ dÃ¹ng Ä‘á»‹a chá»‰: `db-service.dev.svc.cluster.local`.

---

### 5\. "Äá»“ nghá»" `kubectl` Ä‘á»ƒ lÃ m viá»‡c vá»›i Namespace

- **Xem tÃ i nguyÃªn trong má»™t namespace cá»¥ thá»ƒ:**
  ```bash
  kubectl get pods --namespace kube-system
  # Hoáº·c viáº¿t táº¯t:
  kubectl get pods -n kube-system
  ```
- **Xem tÃ i nguyÃªn trong Táº¤T Cáº¢ cÃ¡c namespace:**
  ```bash
  kubectl get pods --all-namespaces
  ```
- **Táº¡o tÃ i nguyÃªn trong má»™t namespace cá»¥ thá»ƒ:**
  - **CÃ¡ch 1 (DÃ¹ng cá»):** `kubectl create -f pod.yaml -n dev`
  - **CÃ¡ch 2 (Khai bÃ¡o trong YAML - Khuyáº¿n khÃ­ch):** ThÃªm trÆ°á»ng `namespace: dev` vÃ o pháº§n `metadata`.
    ```yaml
    apiVersion: v1
    kind: Pod
    metadata:
      name: my-pod
      namespace: dev # <-- LuÃ´n táº¡o trong namespace 'dev'
    ```
- **Táº¡o má»™t Namespace má»›i:**
  - `kubectl create namespace dev`
- **Chuyá»ƒn "NhÃ " (Thay Ä‘á»•i namespace lÃ m viá»‡c máº·c Ä‘á»‹nh):**
  - Äá»ƒ khÃ´ng pháº£i gÃµ `-n dev` má»—i láº§n, báº¡n cÃ³ thá»ƒ chuyá»ƒn context hiá»‡n táº¡i sang lÃ m viá»‡c vá»›i namespace `dev`.
  - `kubectl config set-context --current --namespace=dev`
  - Sau lá»‡nh nÃ y, `kubectl get pods` sáº½ tá»± Ä‘á»™ng liá»‡t kÃª cÃ¡c pod trong namespace `dev`.

### 6\. Resource Quota - "Quáº£n gia ngÃ¢n sÃ¡ch" cho tá»«ng Namespace ğŸ’°

**Resource Quota** giá»‘ng nhÆ° má»™t "quáº£n gia ngÃ¢n sÃ¡ch" Ä‘Æ°á»£c giao nhiá»‡m vá»¥ kiá»ƒm soÃ¡t vÃ  giá»›i háº¡n tÃ i nguyÃªn mÃ  má»—i namespace Ä‘Æ°á»£c phÃ©p sá»­ dá»¥ng.

#### 6.1. Resource Quota cÃ³ thá»ƒ giá»›i háº¡n gÃ¬?

- **TÃ i nguyÃªn tÃ­nh toÃ¡n:** - `requests.cpu`: Tá»•ng CPU request cá»§a táº¥t cáº£ Pod - `requests.memory`: Tá»•ng Memory request cá»§a táº¥t cáº£ Pod - `limits.cpu`: Tá»•ng CPU limit cá»§a táº¥t cáº£ Pod - `limits.memory`: Tá»•ng Memory limit cá»§a táº¥t cáº£ Pod
- **Sá»‘ lÆ°á»£ng Ä‘á»‘i tÆ°á»£ng:** - `count/pods`: Sá»‘ lÆ°á»£ng Pod tá»‘i Ä‘a - `count/services`: Sá»‘ lÆ°á»£ng Service tá»‘i Ä‘a - `count/persistentvolumeclaims`: Sá»‘ lÆ°á»£ng PVC tá»‘i Ä‘a

#### 6.2. VÃ­ dá»¥ Resource Quota

```yaml
apiVersion: v1
kind: ResourceQuota
metadata:
  name: dev-quota
  namespace: dev
spec:
  hard:
    requests.cpu: "4" # Tá»‘i Ä‘a 4 CPU cores Ä‘Æ°á»£c yÃªu cáº§u
    requests.memory: 8Gi # Tá»‘i Ä‘a 8GB RAM Ä‘Æ°á»£c yÃªu cáº§u
    limits.cpu: "8" # Tá»‘i Ä‘a 8 CPU cores limit
    limits.memory: 16Gi # Tá»‘i Ä‘a 16GB RAM limit
    count/pods: "10" # Tá»‘i Ä‘a 10 Pods
    count/services: "5" # Tá»‘i Ä‘a 5 Services
```

#### 6.3. Lá»‡nh kubectl cho Resource Quota

```bash
# Xem resource quota trong namespace
kubectl get resourcequota -n dev

# Xem chi tiáº¿t usage
kubectl describe resourcequota dev-quota -n dev

# Táº¡o resource quota
kubectl apply -f quota.yaml
```

**âš ï¸ LÆ°u Ã½ quan trá»ng:** Khi namespace cÃ³ ResourceQuota cho CPU/Memory, táº¥t cáº£ Pod **Báº®T BUá»˜C** pháº£i khai bÃ¡o `resources.requests` vÃ  `resources.limits`, náº¿u khÃ´ng sáº½ bá»‹ tá»« chá»‘i táº¡o.

---

---

### 7. "Chá»‘t háº¡" cho Ká»³ thi CKA ğŸ“

- **Namespaces** cung cáº¥p sá»± **cÃ´ láº­p logic** (khÃ´ng pháº£i váº­t lÃ½) giá»¯a cÃ¡c tÃ i nguyÃªn.
- Náº¯m vá»¯ng 3 namespace máº·c Ä‘á»‹nh: **`default`**, **`kube-system`**, **`kube-public`**.
- Hiá»ƒu cÃ¡ch giao tiáº¿p giá»¯a cÃ¡c namespace báº±ng **FQDN**.
- ThÃ nh tháº¡o cÃ¡c lá»‡nh `kubectl` vá»›i cá» **`--namespace`** (hoáº·c `-n`) vÃ  lá»‡nh **`kubectl config set-context`** Ä‘á»ƒ chuyá»ƒn Ä‘á»•i namespace máº·c Ä‘á»‹nh.
- Biáº¿t ráº±ng **ResourceQuota** Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ giá»›i háº¡n tÃ i nguyÃªn cho má»—i namespace.
